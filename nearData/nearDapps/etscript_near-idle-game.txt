*GitHub Repository "etscript/near-idle-game"*

'''--- README.md ---
# NEAR Place

Draw with pixels. Your pixels earn you more pixels, so better artists get more pixels to draw.

'''
'''--- contract-rs/pixel-board/Cargo.toml ---
[package]
name = "near-place"
version = "0.1.0"
authors = ["Near Inc <hello@nearprotocol.com>"]
edition = "2018"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
near-sdk = "3.1.0"

[profile.release]
codegen-units = 1
# Tell `rustc` to optimize for small code size.
opt-level = "s"
lto = true
debug = false
panic = "abort"
# Opt into extra safety checks on arithmetic operations https://stackoverflow.com/a/64136471/249801
overflow-checks = true

[workspace]
members = []

'''
'''--- contract-rs/pixel-board/README.md ---
# NEAR Place

Smart contract to keep track of the board.

## Building

```bash
./build.sh
```

## Testing

To test run:

```bash
cargo test --package near-place -- --nocapture
```

'''
'''--- contract-rs/pixel-board/build.sh ---
#!/bin/bash
set -e

RUSTFLAGS='-C link-arg=-s' cargo build --target wasm32-unknown-unknown --release
cp target/wasm32-unknown-unknown/release/near_place.wasm ./res/

'''
'''--- contract-rs/pixel-board/src/account.rs ---
use crate::*;

use near_sdk::borsh::{self, BorshDeserialize, BorshSerialize};
use near_sdk::json_types::{ValidAccountId, U128};
use near_sdk::{env, near_bindgen, AccountId};

pub const PIXEL_COST: Balance = 1_000_000_000_000_000_000;
pub const DEFAULT_BALANCE: Balance = 100 * PIXEL_COST;
/// Current reward is 1 pixel per day per pixel.
pub const REWARD_PER_PIXEL_PER_NANOSEC: Balance = PIXEL_COST / (24 * 60 * 60 * 1_000_000_000);

pub type AccountIndex = u32;

#[derive(BorshDeserialize, BorshSerialize)]
pub struct Account {
    pub account_id: AccountId,
    pub account_index: AccountIndex,
    pub balance: u128,
    pub num_pixels: u32,
    pub claim_timestamp: u64,
}

impl Account {
    pub fn new(account_id: AccountId, account_index: AccountIndex) -> Self {
        Self {
            account_id,
            account_index,
            balance: DEFAULT_BALANCE.into(),
            num_pixels: 0,
            claim_timestamp: env::block_timestamp(),
        }
    }

    pub fn touch(&mut self) {
        let block_timestamp = env::block_timestamp();
        let time_diff = block_timestamp - self.claim_timestamp;
        self.balance += Balance::from(self.num_pixels + 1)
            * Balance::from(time_diff)
            * REWARD_PER_PIXEL_PER_NANOSEC;
        self.claim_timestamp = block_timestamp;
    }

    pub fn charge(&mut self, num_pixels: u32) {
        let cost = Balance::from(num_pixels) * PIXEL_COST;
        assert!(self.balance >= cost, "Not enough balance to draw pixels");
        self.balance -= cost;
    }
}

impl Place {
    pub fn get_account_by_id(&self, account_id: AccountId) -> Account {
        let account_index = self
            .account_indices
            .get(&account_id)
            .unwrap_or(self.accounts.len() as u32);
        self.accounts
            .get(u64::from(account_index))
            .map(|mut account| {
                account.touch();
                account
            })
            .unwrap_or_else(|| Account::new(account_id, account_index))
    }

    pub fn get_account_by_index(&self, account_index: AccountIndex) -> Option<Account> {
        self.accounts
            .get(u64::from(account_index))
            .map(|mut account| {
                account.touch();
                account
            })
    }

    pub fn save_account(&mut self, account: &Account) {
        if u64::from(account.account_index) >= self.accounts.len() {
            self.account_indices
                .insert(&account.account_id, &account.account_index);
            self.accounts.push(account);
        } else {
            self.accounts
                .replace(u64::from(account.account_index), account);
        }
    }
}

#[near_bindgen]
impl Place {
    pub fn get_pixel_cost(&self) -> U128 {
        PIXEL_COST.into()
    }

    pub fn get_account_balance(&self, account_id: ValidAccountId) -> U128 {
        self.get_account_by_id(account_id.into()).balance.into()
    }

    pub fn get_account_num_pixels(&self, account_id: ValidAccountId) -> u32 {
        self.get_account_by_id(account_id.into()).num_pixels
    }

    pub fn get_account_id_by_index(&self, account_index: AccountIndex) -> Option<AccountId> {
        self.accounts
            .get(u64::from(account_index))
            .map(|account| account.account_id)
    }
}

'''
'''--- contract-rs/pixel-board/src/board.rs ---
use crate::*;

use near_sdk::borsh::{self, BorshDeserialize, BorshSerialize};
use near_sdk::collections::Vector;
use near_sdk::json_types::Base64VecU8;
use near_sdk::near_bindgen;
use near_sdk::serde::{Deserialize, Serialize};
use std::collections::HashMap;

pub const BOARD_WIDTH: u32 = 50;
pub const BOARD_HEIGHT: u32 = 50;
pub const TOTAL_NUM_PIXELS: u32 = BOARD_WIDTH * BOARD_HEIGHT;

#[derive(BorshDeserialize, BorshSerialize, Copy, Clone)]
pub struct Pixel {
    pub color: u32,
    pub owner_id: AccountIndex,
}

impl Default for Pixel {
    fn default() -> Self {
        Self {
            color: 0xffffff,
            owner_id: 0,
        }
    }
}

#[derive(BorshDeserialize, BorshSerialize)]
pub struct PixelLine(pub Vec<Pixel>);

impl Default for PixelLine {
    fn default() -> Self {
        Self(vec![Pixel::default(); BOARD_WIDTH as usize])
    }
}

#[derive(BorshDeserialize, BorshSerialize)]
pub struct PixelBoard {
    pub lines: Vector<PixelLine>,
    pub line_versions: Vec<u32>,
}

#[derive(Serialize, Deserialize)]
#[serde(crate = "near_sdk::serde")]
pub struct SetPixelRequest {
    pub x: u32,
    pub y: u32,
    pub color: u32,
}

impl SetPixelRequest {
    pub fn assert_valid(&self) {
        assert!(self.x < BOARD_WIDTH, "X is out of bounds");
        assert!(self.x < BOARD_HEIGHT, "Y is out of bounds");
        assert!(self.color <= 0xffffff, "Color is out of bounds");
    }
}

impl PixelBoard {
    pub fn new() -> Self {
        let mut board = Self {
            lines: Vector::new(b"p".to_vec()),
            line_versions: vec![0; BOARD_HEIGHT as usize],
        };
        let default_line = PixelLine::default();
        for _ in 0..BOARD_HEIGHT {
            board.lines.push(&default_line);
        }
        board
    }

    pub fn get_line(&self, index: u32) -> PixelLine {
        self.lines.get(u64::from(index)).unwrap()
    }

    /// Returns the list of the old owner IDs for the replaced pixels
    pub fn set_pixels(
        &mut self,
        new_owner_id: u32,
        pixels: &[SetPixelRequest],
    ) -> HashMap<AccountIndex, u32> {
        let mut lines = HashMap::new();
        let mut old_owners = HashMap::new();
        for request in pixels {
            request.assert_valid();
            let line = lines
                .entry(request.y)
                .or_insert_with(|| self.lines.get(u64::from(request.y)).unwrap());
            let old_owner = line.0[request.x as usize].owner_id;
            line.0[request.x as usize] = Pixel {
                owner_id: new_owner_id,
                color: request.color,
            };
            *old_owners.entry(old_owner).or_default() += 1;
        }
        for (i, line) in lines {
            self.save_line(i, &line);
        }
        old_owners
    }

    fn save_line(&mut self, index: u32, line: &PixelLine) {
        self.lines.replace(u64::from(index), line);
        self.line_versions[index as usize] += 1;
    }
}

#[near_bindgen]
impl Place {
    pub fn get_lines(&self, lines: Vec<u32>) -> Vec<Base64VecU8> {
        lines
            .into_iter()
            .map(|i| {
                let line = self.board.get_line(i);
                line.try_to_vec().unwrap().into()
            })
            .collect()
    }

    pub fn get_line_versions(&self) -> Vec<u32> {
        self.board.line_versions.clone()
    }
}

'''
'''--- contract-rs/pixel-board/src/lib.rs ---
use near_sdk::borsh::{self, BorshDeserialize, BorshSerialize};
use near_sdk::collections::{UnorderedMap, Vector};
use near_sdk::{env, near_bindgen, AccountId, Balance, PanicOnDefault};

pub mod account;
pub use crate::account::*;

pub mod board;
pub use crate::board::*;

#[global_allocator]
static ALLOC: near_sdk::wee_alloc::WeeAlloc<'_> = near_sdk::wee_alloc::WeeAlloc::INIT;

#[near_bindgen]
#[derive(BorshDeserialize, BorshSerialize, PanicOnDefault)]
pub struct Place {
    pub account_indices: UnorderedMap<AccountId, u32>,
    pub board: board::PixelBoard,
    pub accounts: Vector<Account>,
}

#[near_bindgen]
impl Place {
    #[init]
    pub fn new() -> Self {
        assert!(!env::state_exists(), "Already initialized");
        let mut place = Self {
            account_indices: UnorderedMap::new(b"i".to_vec()),
            board: PixelBoard::new(),
            accounts: Vector::new(b"a".to_vec()),
        };

        let mut account = place.get_account_by_id(env::current_account_id());
        account.num_pixels = TOTAL_NUM_PIXELS;
        place.save_account(&account);

        place
    }

    #[payable]
    pub fn buy_tokens(&mut self) {
        unimplemented!();
    }

    pub fn draw(&mut self, pixels: Vec<SetPixelRequest>) {
        let mut account = self.get_account_by_id(env::predecessor_account_id());
        let new_pixels = pixels.len() as u32;
        account.charge(new_pixels);

        let mut old_owners = self.board.set_pixels(account.account_index, &pixels);
        let replaced_pixels = old_owners.remove(&account.account_index).unwrap_or(0);
        account.num_pixels += new_pixels - replaced_pixels;
        self.save_account(&account);

        for (account_index, num_pixels) in old_owners {
            let mut account = self.get_account_by_index(account_index).unwrap();
            account.num_pixels -= num_pixels;
            self.save_account(&account);
        }
    }
}

#[cfg(not(target_arch = "wasm32"))]
#[cfg(test)]
mod tests {
    use super::*;

    use near_sdk::{testing_env, MockedBlockchain, VMContext};

    pub fn get_context(block_timestamp: u64, is_view: bool) -> VMContext {
        VMContext {
            current_account_id: "place.meta".to_string(),
            signer_account_id: "place.meta".to_string(),
            signer_account_pk: vec![0, 1, 2],
            predecessor_account_id: "place.meta".to_string(),
            input: vec![],
            block_index: 1,
            block_timestamp,
            epoch_height: 1,
            account_balance: 10u128.pow(26),
            account_locked_balance: 0,
            storage_usage: 10u64.pow(6),
            attached_deposit: 0,
            prepaid_gas: 300 * 10u64.pow(12),
            random_seed: vec![0, 1, 2],
            is_view,
            output_data_receivers: vec![],
        }
    }

    #[test]
    fn test_new() {
        let mut context = get_context(3_600_000_000_000, false);
        testing_env!(context.clone());
        let contract = Place::new();

        context.is_view = true;
        testing_env!(context.clone());
        assert_eq!(contract.get_pixel_cost().0, PIXEL_COST);
        assert_eq!(
            contract.get_line_versions(),
            vec![0u32; BOARD_HEIGHT as usize]
        );
    }
}

'''
'''--- frontend/README.md ---
This project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).

## Available Scripts

In the project directory, you can run:

### `yarn start`

Runs the app in the development mode.<br />
Open [http://localhost:3000](http://localhost:3000) to view it in the browser.

The page will reload if you make edits.<br />
You will also see any lint errors in the console.

### `yarn test`

Launches the test runner in the interactive watch mode.<br />
See the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.

### `yarn build`

Builds the app for production to the `build` folder.<br />
It correctly bundles React in production mode and optimizes the build for the best performance.

The build is minified and the filenames include the hashes.<br />
Your app is ready to be deployed!

See the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.

### `yarn eject`

**Note: this is a one-way operation. Once you `eject`, you canâ€™t go back!**

If you arenâ€™t satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.

Instead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point youâ€™re on your own.

You donâ€™t have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldnâ€™t feel obligated to use this feature. However we understand that this tool wouldnâ€™t be useful if you couldnâ€™t customize it when you are ready for it.

## Learn More

You can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).

To learn React, check out the [React documentation](https://reactjs.org/).

### Code Splitting

This section has moved here: https://facebook.github.io/create-react-app/docs/code-splitting

### Analyzing the Bundle Size

This section has moved here: https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size

### Making a Progressive Web App

This section has moved here: https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app

### Advanced Configuration

This section has moved here: https://facebook.github.io/create-react-app/docs/advanced-configuration

### Deployment

This section has moved here: https://facebook.github.io/create-react-app/docs/deployment

### `yarn build` fails to minify

This section has moved here: https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify

'''
'''--- frontend/package.json ---
{
  "name": "frontend",
  "version": "0.1.0",
  "homepage": "place",
  "private": true,
  "dependencies": {
    "@testing-library/jest-dom": "^4.2.4",
    "@testing-library/react": "^9.3.2",
    "@testing-library/user-event": "^7.1.2",
    "bn.js": "^5.1.1",
    "near-api-js": "^0.27.0",
    "react": "^16.13.1",
    "react-bootstrap": "^1.0.0",
    "react-color": "^2.18.1",
    "react-dom": "^16.13.1",
    "react-scripts": "3.4.0"
  },
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject",
    "deploy": "yarn build && gh-pages -d build"
  },
  "eslintConfig": {
    "extends": "react-app"
  },
  "browserslist": {
    "production": [
      ">0.2%",
      "not dead",
      "not op_mini all"
    ],
    "development": [
      "last 1 chrome version",
      "last 1 firefox version",
      "last 1 safari version"
    ]
  },
  "devDependencies": {
    "gh-pages": "^2.2.0"
  }
}

'''
'''--- frontend/public/index.html ---
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="NEAR Place - draw with pixels"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>NEAR Place</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>

'''
'''--- frontend/public/manifest.json ---
{
  "short_name": "React App",
  "name": "Create React App Sample",
  "icons": [
    {
      "src": "favicon.ico",
      "sizes": "64x64 32x32 24x24 16x16",
      "type": "image/x-icon"
    },
    {
      "src": "logo192.png",
      "type": "image/png",
      "sizes": "192x192"
    },
    {
      "src": "logo512.png",
      "type": "image/png",
      "sizes": "512x512"
    }
  ],
  "start_url": ".",
  "display": "standalone",
  "theme_color": "#000000",
  "background_color": "#ffffff"
}

'''
'''--- frontend/public/robots.txt ---
# https://www.robotstxt.org/robotstxt.html
User-agent: *
Disallow:

'''
'''--- frontend/src/App.css ---
.pixel-board {
  display: inline-block;
  width: 100%;
  height: 100%;
  max-width: 800px;
  max-height: 800px;
  border: 1px solid #eeeeee;
}

.color-picker {
  max-width: 800px;
  display: inline-block;
  padding: 6px;
}

.circle-picker {
  margin-top: 5px;
}

@keyframes placeHolderShimmer {
  0% {
    background-position: 0px 0;
  }
  100% {
    background-position: 0 800px;
  }
}

.c-animated-background {
  animation-duration: 2s;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-name: placeHolderShimmer;
  animation-timing-function: linear;
  background: #333;
  background: linear-gradient(to bottom, #333 0%, #116611 4%, #55ff55 8%, #116611 12%, #333 16%);
}

'''
'''--- frontend/src/App.js ---
import "./App.css";
import React from 'react';
// import BN from 'bn.js';
import * as nearAPI from 'near-api-js'
import { HuePicker, GithubPicker } from 'react-color'

// const OneNear = new BN("1000000000000000000000000");
const ContractName = 'place.meta';
const BoardHeight = 50;
const BoardWidth = 50;
const NumLinesPerFetch = 10;
const ExpectedLineLength = 4 + 8 * BoardWidth;
const CellWidth = 16;
const CellHeight = 16;
const MaxNumColors = 31;
const BatchOfPixels = 10;
// 500 ms
const BatchTimeout = 500;
const RefreshBoardTimeout = 1000;
const MaxWorkTime = 10 * 60 * 1000;

const intToColor = (c) => `#${c.toString(16).padStart(6, '0')}`;
const transparentColor = (c, a) => `rgba(${(c >> 16) / 1}, ${((c >> 8) & 0xff) / 1}, ${(c & 0xff) / 1}, ${a})`
const generateGamma = (hue) => {
  const gammaColors = [];
  for (let i = 0; i < MaxNumColors; ++i) {
    gammaColors.push(`hsl(${hue}, 100%, ${100 * i / (MaxNumColors - 1)}%)`);
  }
  return gammaColors;
};
const decodeLine = (line) => {
  let buf = Buffer.from(line, 'base64');
  if (buf.length !== ExpectedLineLength) {
    throw new Error("Unexpected encoded line length");
  }
  let pixels = []
  for (let i = 4; i < buf.length; i += 8) {
    let color = buf.readUInt32LE(i);
    let ownerIndex = buf.readUInt32LE(i + 4);
    pixels.push({
      color,
      ownerIndex,
    })
  }
  return pixels;
};

class App extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      connected: false,
      signedIn: false,
      accountId: null,
      balance: 0.0,
      numPixels: 0,
      boardLoaded: false,
      selectedCell: null,
      currentColor: 0xff0000,
      pickerColor: '#ff0000',
      colors: ["#000000", "#666666", "#aaaaaa", "#FFFFFF", "#F44E3B", "#D33115", "#9F0500", "#FE9200", "#E27300", "#C45100", "#FCDC00", "#FCC400", "#FB9E00", "#DBDF00", "#B0BC00", "#808900", "#A4DD00", "#68BC00", "#194D33", "#68CCCA", "#16A5A5", "#0C797D", "#73D8FF", "#009CE0", "#0062B1", "#AEA1FF", "#7B64FF", "#653294", "#FDA1FF", "#FA28FF", "#AB149E"].map((c) => c.toLowerCase()),
      gammaColors: generateGamma(0),
      pickingColor: false,
    };

    this._balanceRefreshTimer = null;
    this.canvasRef = React.createRef();
    this._context = false;
    this._lines = false;
    this._queue = [];
    this._pendingPixels = [];
    this._refreshBoardTimer = null;
    this._sendQueueTimer = null;
    this._stopRefreshTime = new Date().getTime() + MaxWorkTime;

    this._initNear().then(() => {
      this.setState({
        connected: true,
        signedIn: !!this._accountId,
        accountId: this._accountId,
      });
    });
  }

  componentDidMount() {
    const canvas = this.canvasRef.current;
    this._context = canvas.getContext('2d');

    canvas.addEventListener('mousemove', (e) => {
      const x = Math.trunc(e.offsetX / e.target.clientWidth * BoardWidth);
      const y = Math.trunc(e.offsetY / e.target.clientHeight * BoardWidth);
      let cell = null;
      if (x >= 0 && x < BoardWidth && y >= 0 && y < BoardHeight) {
        cell = { x, y };
      }
      if (JSON.stringify(cell) !== JSON.stringify(this.state.selectedCell)) {
        this.setState({
          selectedCell: cell,
        }, () => {
          this.renderCanvas()
        })
      }
    });

    canvas.addEventListener('click', async (e) => {
      if (this.state.selectedCell !== null) {
        if (this.state.pickingColor) {
          this.pickColor(this.state.selectedCell);
        } else {
          this.saveColor();
          await this.drawPixel(this.state.selectedCell);
        }
      }
    });

    document.addEventListener('keydown', (e) => {
      e.altKey && this.setState({
        pickingColor: true,
      }, () => {
        this.renderCanvas()
      });
    })
    document.addEventListener('keyup', (e) => {
      !e.altKey && this.setState({
        pickingColor: false,
      }, () => {
        this.renderCanvas()
      });
    })
  }

  pickColor(cell) {
    if (!this.state.signedIn || !this._lines || !this._lines[cell.y]) {
      return;
    }
    const color = this._lines[cell.y][cell.x].color;

    this.setState({
      currentColor: color,
      pickingColor: false,
    }, () => {
      this.renderCanvas()
    });
  }

  async _sendQueue() {
    const pixels = this._queue.slice(0, BatchOfPixels);
    this._queue = this._queue.slice(BatchOfPixels);
    this._pendingPixels = pixels;

    try {
      await this._contract.draw({
        pixels
      });
      await Promise.all([this.refreshBoard(true), this.refreshAccountStats()]);
    } catch (error) {
      console.log("Failed to send a transaction", error);
      this._queue = this._queue.concat(this._pendingPixels);
    }
    this._pendingPixels = [];
  }

  async _pingQueue(ready) {
    if (this._sendQueueTimer) {
      clearTimeout(this._sendQueueTimer);
      this._sendQueueTimer = null;
    }

    if (this._pendingPixels.length === 0 && (this._queue.length >= BatchOfPixels || ready)) {
      await this._sendQueue();
    }
    if (this._queue.length > 0) {
      this._sendQueueTimer = setTimeout(async () => {
        await this._pingQueue(true);
      }, BatchTimeout);
    }

  }

  async drawPixel(cell) {
    if (!this.state.signedIn || !this._lines || !this._lines[cell.y]) {
      return;
    }

    this._queue.push({
      x: cell.x,
      y: cell.y,
      color: this.state.currentColor,
    });

    this._stopRefreshTime = new Date().getTime() + MaxWorkTime;
    await this._pingQueue(false);
  }

  async refreshAccountStats() {
    let balance = parseFloat(await this._contract.get_account_balance({account_id: this._accountId}));
    let numPixels = await this._contract.get_account_num_pixels({account_id: this._accountId})
    if (this._balanceRefreshTimer) {
      clearInterval(this._balanceRefreshTimer);
      this._balanceRefreshTimer = null;
    }
    const startTime = new Date().getTime();
    const rewardPerMs = (numPixels + 1) * this._pixelCost / (24 * 60 * 60 * 1000);

    this.setState({
      balance: balance / this._pixelCost,
      numPixels,
    });

    this._balanceRefreshTimer = setInterval(() => {
      const t = new Date().getTime();
      this.setState({
        balance: (balance + (t - startTime) * rewardPerMs) / this._pixelCost
      })
    }, 100);
  }

  async _initNear() {
    const nearConfig = {
      networkId: 'default',
      nodeUrl: 'https://rpc.testnet.near.org',
      contractName: ContractName,
      walletUrl: 'https://wallet.testnet.near.org',
    };
    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();
    const near = await nearAPI.connect(Object.assign({ deps: { keyStore } }, nearConfig));
    this._keyStore = keyStore;
    this._nearConfig = nearConfig;
    this._near = near;

    this._walletConnection = new nearAPI.WalletConnection(near, ContractName);
    this._accountId = this._walletConnection.getAccountId();

    this._account = this._walletConnection.account();
    this._contract = new nearAPI.Contract(this._account, ContractName, {
      viewMethods: ['get_lines', 'get_line_versions', 'get_pixel_cost', 'get_account_balance', 'get_account_num_pixels', 'get_account_id_by_index'],
      changeMethods: ['draw', 'buy_tokens'],
    });
    this._pixelCost = parseFloat(await this._contract.get_pixel_cost());
    if (this._accountId) {
      await this.refreshAccountStats();
    }
    this._lineVersions = Array(BoardHeight).fill(-1);
    this._lines = Array(BoardHeight).fill(false);
    await this.refreshBoard(true);
  }

  async refreshBoard(forced) {
    if (this._refreshBoardTimer) {
      clearTimeout(this._refreshBoardTimer);
      this._refreshBoardTimer = null;
    }
    const t = new Date().getTime();
    if (t < this._stopRefreshTime) {
      this._refreshBoardTimer = setTimeout(async () => {
        await this.refreshBoard(false);
      }, RefreshBoardTimeout);
    }

    if (!forced && document.hidden) {
      return;
    }

    let lineVersions = await this._contract.get_line_versions();
    let needLines = [];
    for (let i = 0; i < BoardHeight; ++i) {
      if (lineVersions[i] !== this._lineVersions[i]) {
        needLines.push(i);
      }
    }
    let requestLines = []
    for (let i = 0; i < needLines.length; i += NumLinesPerFetch) {
      requestLines.push(needLines.slice(i, i + NumLinesPerFetch));
    }

    let results = await Promise.all(requestLines.map(lines => this._contract.get_lines({lines})));
    results = results.flat();
    requestLines = requestLines.flat();
    for (let i = 0; i < requestLines.length; ++i) {
      let lineIndex = requestLines[i];
      let line = decodeLine(results[i]);
      this._lines[lineIndex] = line;
    }

    this._lineVersions = lineVersions;
    this.renderCanvas();
  }

  renderCanvas() {
    if (!this._context || !this._lines) {
      return;
    }

    const ctx = this._context;

    for (let i = 0; i < BoardHeight; ++i) {
      const line = this._lines[i];
      if (!line) {
        continue;
      }
      for (let j = 0; j < BoardWidth; ++j) {
        const p = line[j];
        ctx.fillStyle = intToColor(p.color);
        ctx.fillRect(j * CellWidth, i * CellHeight, CellWidth, CellHeight);
      }
    }

    this._pendingPixels.concat(this._queue).forEach((p) => {
      ctx.fillStyle = intToColor(p.color);
      ctx.fillRect(p.x * CellWidth, p.y * CellHeight, CellWidth, CellHeight);
    })

    if (this.state.selectedCell) {
      const c = this.state.selectedCell;
      if (this.state.pickingColor) {
        const color = this._lines[c.y] ? this._lines[c.y][c.x].color : 0;
        ctx.beginPath();
        ctx.strokeStyle = ctx.fillStyle = transparentColor(color, 0.5);
        ctx.lineWidth = CellWidth * 4;
        ctx.arc((c.x + 0.5) * CellWidth, (c.y + 0.5) * CellHeight, CellWidth * 4, 0, 2 * Math.PI);
        ctx.stroke();
        ctx.closePath();

        ctx.beginPath();
        ctx.strokeStyle = ctx.fillStyle = transparentColor(color, 1);
        ctx.lineWidth = CellWidth * 2;
        ctx.arc((c.x + 0.5) * CellWidth, (c.y + 0.5) * CellHeight, CellWidth * 4, 0, 2 * Math.PI);
        ctx.stroke();
        ctx.closePath();
      } else {
        ctx.fillStyle = transparentColor(this.state.currentColor, 0.2);
        ctx.fillRect(c.x * CellWidth, 0, CellWidth, c.y * CellHeight);
        ctx.fillRect(c.x * CellWidth, (c.y+ 1) * CellHeight, CellWidth, (BoardHeight - c.y - 1) * CellHeight);
        ctx.fillRect(0, c.y * CellHeight, c.x * CellWidth, CellHeight);
        ctx.fillRect( (c.x + 1) * CellWidth, c.y * CellHeight, (BoardWidth - c.x - 1) * CellWidth, CellHeight);

        ctx.beginPath();
        ctx.lineWidth = 3;
        ctx.fillStyle = intToColor(this.state.currentColor);
        ctx.strokeStyle = intToColor(this.state.currentColor);
        ctx.rect(c.x * CellWidth, c.y * CellHeight, CellWidth, CellHeight);
        ctx.stroke();
        ctx.closePath();
      }
    }

    if (!this.state.boardLoaded) {
      this.setState({
        boardLoaded: true
      })
    }
  }

  async requestSignIn() {
    const appTitle = 'NEAR Place';
    await this._walletConnection.requestSignIn(
        ContractName,
        appTitle
    )
  }

  async logOut() {
    this._walletConnection.signOut();
    this._accountId = null;
    this.setState({
      signedIn: !!this._accountId,
      accountId: this._accountId,
    })
  }

  hueColorChange(c) {
    this.setState({
      gammaColors: generateGamma(c.hsl.h)
    })
    this.changeColor(c)
  }

  saveColor() {
    const newColor = intToColor(this.state.currentColor);
    const index = this.state.colors.indexOf(newColor);
    if (index >= 0) {
      this.state.colors.splice(index, 1);
    }
    this.setState({
      colors: [newColor].concat(this.state.colors).slice(0, MaxNumColors)
    });
  }

  changeColor(c) {
    const currentColor = c.rgb.r * 0x010000 + c.rgb.g * 0x000100 + c.rgb.b;
    this.setState({
      pickerColor: c,
      currentColor,
    }, () => {
      this.renderCanvas();
    })
  }

  render() {
    const content = !this.state.connected ? (
        <div>Connecting... <span className="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span></div>
    ) : (this.state.signedIn ? (
        <div>
          <div className="float-right">
            <button
              className="btn btn-outline-secondary"
              onClick={() => this.logOut()}>Log out</button>
          </div>
          <h4>Hello, <span className="font-weight-bold">{this.state.accountId}</span>!</h4>
          <div>
            PIXEL tokens: {this.state.balance.toFixed(6)}
          </div>
          <div>
            Your pixels: {this.state.numPixels}
          </div>
          <div className="color-picker">
            <HuePicker color={ this.state.pickerColor } width="100%" disableAlpha={true} onChange={(c) => this.hueColorChange(c)}/>
            <GithubPicker className="circle-picker" colors={this.state.gammaColors} color={ this.state.pickerColor } triangle='hide' width="100%" onChangeComplete={(c) => this.changeColor(c)}/>
            <GithubPicker className="circle-picker" colors={this.state.colors} color={ this.state.pickerColor } triangle='hide' width="100%" onChangeComplete={(c) => this.hueColorChange(c)}/>
          </div>
        </div>
    ) : (
        <div style={{marginBottom: "10px"}}>
          <button
              className="btn btn-primary"
              onClick={() => this.requestSignIn()}>Log in with NEAR Wallet</button>
        </div>
    ));
    return (
      <div className="px-5">
        <h1>NEAR Place</h1>
        {content}
        <div>
          <canvas ref={this.canvasRef}
                  width={800}
                  height={800}
                  className={this.state.boardLoaded ? "pixel-board" : "pixel-board c-animated-background"}>

          </canvas>
        </div>
      </div>
    );
  }
}

export default App;

'''
'''--- frontend/src/index.css ---
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

'''
'''--- frontend/src/index.js ---
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';

ReactDOM.render(<App />, document.getElementById('root'));

'''
'''--- vue-frontend/README.md ---
# æŒ‚æœºæ”¾ç½®ç±»å°æ¸¸æˆ

> ä¸€ä¸ªå…¨éšæœºçš„åˆ·è£…å¤‡åˆ·è¯æ¡å°æ¸¸æˆ,æ¸¸æˆé“¾æ¥ï¼š[couy.xyz](http://couy.xyz)

# æ¸¸æˆæˆªå›¾

![æ¸¸æˆæˆªå›¾1](https://raw.githubusercontent.com/Couy69/assets/master/Snipaste_2020-11-03_13-05-23.png)
![æ¸¸æˆæˆªå›¾2](https://raw.githubusercontent.com/Couy69/assets/master/Snipaste_2020-11-09_13-01-54.png)
![æ¸¸æˆæˆªå›¾3](https://raw.githubusercontent.com/Couy69/assets/master/Snipaste_2020-11-09_13-01-30.png)

# æ¸¸æˆè®¾è®¡

- é€šè¿‡å‰¯æœ¬è·å¾—è£…å¤‡ä¸é‡‘å¸
- è£…å¤‡åˆ†ä¸ºå››ä¸ªç­‰çº§ï¼šç ´æ—§ã€æ™®é€šã€ç¥å™¨ã€å²è¯—
- ä¸»è§’é»˜è®¤æ¯ç§’å›è¡€ 2%
- é»˜è®¤æš´å‡»ä¼¤å®³ 150%
- å®Œæˆå‰¯æœ¬æ—¶å¯èƒ½æ‰è½ç‹¬ç‰¹çº§åˆ«(5 ä¸ªè¯æ¡)çš„è£…å¤‡ï¼ˆé€šå…³å 2.5%æ‰è½ç‡ï¼Œæ— å°½æŒ‘æˆ˜ä¸ä¼šæ‰è½ï¼‰
- é€šå…³åå¼€å¯æ— å°½æŒ‘æˆ˜

# æˆæƒè¯´æ˜
- æˆæƒTAPTAPã€ä¸ä¼šç¤¾äº¤çš„äºŒå“ˆã€‘è¿è¥ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æˆ‘åœ¨è´Ÿè´£æ›´æ–°ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ä¸‹è½½è¯•ä¸€ä¸‹ã€‚taptapé“¾æ¥ï¼šhttps://www.taptap.com/app/229315

# æ›´æ–°å†…å®¹

## 2021-1-15 æ›´æ–° (1.3.3)

#### ä¼˜åŒ–

- è°ƒé«˜äº†å¼ºåŒ–çš„å±æ€§å¢å¼º
- å•†åº—åˆ·æ–°åˆ°ç‹¬ç‰¹æ—¶æ–°å¢æç¤º
- è°ƒé«˜äº†ä¸€ç‚¹æ€æ€ªé‡‘å¸è·å–
- æ·»åŠ äº†çœ‹ä¸Šå»å¾ˆç‰›xçš„+13ç‰¹æ•ˆ

#### bug ä¿®å¤

- å·²ä¿®å¤ï¼šç‰¹å®šæƒ…å†µä¸‹æ— å°½æŒ‘æˆ˜æˆåŠŸåå¹¶æ²¡æœ‰å›å¤æ»¡è¡€

## 12-11 æ›´æ–° (1.3.2)

- ç•Œé¢æ˜¾ç¤ºçš„é—®é¢˜ä¸‹ä¸ªç‰ˆæœ¬ä¼šè§£å†³ï¼Œä½œè€…ç°åœ¨æ²‰è¿·èµ›åšæœ‹å…‹2077

#### åŠŸèƒ½è°ƒæ•´

-  å•†åº—å”®å‡ºè£…å¤‡ç­‰çº§æ— ä¸Šé™ï¼Œè·Ÿéšäººç‰©ç­‰çº§
-  æ·»åŠ äº†ç™¾åˆ†æ¯”æ ¼æŒ¡è¯æ¡

#### bug ä¿®å¤

- å·²ä¿®å¤ï¼šæ— å°½ç­‰çº§ä¸äººç‰©ç­‰çº§å¯èƒ½å‡ºç°è´Ÿæ•°(æ„Ÿè°¢å¤©ç‹ï¼Œé¸¡é¸¡å§¬çš„bugæäº¤)
- å·²ä¿®å¤ï¼šæ— å°½å‹¾é€‰é‡å¤æŒ‘æˆ˜åå¯¼è‡´å›°éš¾ä¸æéš¾å‰¯æœ¬ä¹Ÿå¯ä»¥é‡å¤æŒ‘æˆ˜(æ„Ÿè°¢konohaï¼Œæ¸¸æˆç©å®¶çš„bugæäº¤)

## 12-9 æ›´æ–° (1.3.1)

- æäº¤bugæ—¶å¸Œæœ›å‡†ç¡®æè¿°ä¸€ä¸‹ğŸ˜„

#### åŠŸèƒ½è°ƒæ•´

-  æ— å°½éš¾åº¦ï¼šå¯¹åº”å±‚æ•°*10çš„æéš¾å‰¯æœ¬ -> å¯¹åº”å±‚æ•°*5çš„æéš¾å‰¯æœ¬

#### ä¼˜åŒ–

- ç¨å¾®è°ƒé«˜äº†ä¸€ç‚¹é‡‘å¸è·å–
- è‡ªåŠ¨å¼ºåŒ–éœ€è¦ä¸¤å€é‡‘å¸ä¿®æ”¹ä¸ºä¸éœ€è¦é¢å¤–é‡‘å¸,ä¸æ‰‹åŠ¨å¼ºåŒ–ä¸€è‡´
- è°ƒæ•´äº†ç™¾åˆ†æ¯”è¯æ¡çš„æ›²çº¿ï¼Œä¼šåœ¨å‰æœŸä½ç­‰çº§æ—¶è·å¾—æ›´é«˜çš„å±æ€§
- è°ƒé«˜äº†éƒ¨åˆ†å¸¦æŠ¤ç”²è¯æ¡çš„è£…å¤‡å±æ€§

#### bug ä¿®å¤

- å·²ä¿®å¤ï¼šè£…å¤‡å¼ºåŒ–åæ ¼æŒ¡å€¼è®¡ç®—ä½äºé¢„æœŸ

## 12-8 æ›´æ–° (1.3.0)

é‡åˆ°äº†bugæˆ–è€…å¹³è¡¡æ€§æ–¹é¢çš„é—®é¢˜å¸Œæœ›å¤§å®¶å¯ä»¥åé¦ˆä¸€ä¸‹ã€‚

#### åŠŸèƒ½è°ƒæ•´

-  æ·»åŠ äººç‰©è½¬ç”Ÿï¼Œè½¬ç”Ÿæ—¶ä¼šè·å¾—è½¬ç”Ÿç‚¹æ•°æ¥å¼ºåŒ–äººç‰©åŸºç¡€å±æ€§
-  ä¿®æ”¹å‰¯æœ¬åˆ·æ–°è§„åˆ™ï¼Œç°åœ¨å‰¯æœ¬å°†æ ¹æ®äººç‰©ç­‰çº§æ¥åˆ·æ–°ï¼Œç‚¹å‡»èœå•æ çš„åˆ·æ–°æŒ‰é’®æ¥åˆ·æ–°(30S cd)
-  å‰¯æœ¬ç°åœ¨ä¸ºéšæœºç”Ÿæˆï¼Œå¹¶ä¸æ˜¯ä»¥å‰çš„å›ºå®šå±æ€§ï¼Œéš¾åº¦å¢åŠ ï¼Œé‡‘å¸è·å–å¢åŠ 
-  é¥°å“æ æ‹†åˆ†ä¸ºæˆ’æŒ‡ä¸é¡¹é“¾ï¼Œæ·»åŠ æ–°çš„é¡¹é“¾è£…å¤‡
-  æ— å°½æŒ‘æˆ˜ç°åœ¨å¯ä»¥é‡ç½®å½“å‰çš„æŒ‘æˆ˜ç­‰çº§
-  æ·»åŠ æ ¼æŒ¡å±æ€§è¯æ¡
-  æŠ¤ç”²è®¡ç®—å…¬å¼è°ƒæ•´ï¼Œæé™å€¼ç”±100%è°ƒæ•´è‡³95%

#### ä¼˜åŒ–

- åŠ å…¥äº†æ–°çš„å­—ä½“
- é‡é“¸æ—¶ä¼šæ˜¾ç¤ºå½“å‰è¯æ¡çš„å“è´¨ç­‰çº§ï¼Œæ–¹ä¾¿ç¡®å®šå½“å‰è¯æ¡æ˜¯ä¸æ˜¯æœ€ä½³å±æ€§

#### bug ä¿®å¤

- ä¿®å¤åå°æŒ‘æˆ˜å‰¯æœ¬å¤±è´¥æ—¶è‡ªåŠ¨å›è¡€å¤±æ•ˆçš„bug
- è‡ªåŠ¨å‡ºå”®ä»·æ ¼ä½äºé¢„æœŸ

## 11-30 æ›´æ–° (1.2.2)

- è¿™æ¬¡åŸºæœ¬ä¸Šéƒ½æ˜¯äº›å°ä¼˜åŒ–ã€‚

#### åŠŸèƒ½è°ƒæ•´

-  ç°åœ¨æ”¯æŒè‡ªåŠ¨å¼ºåŒ–äº†ï¼Œå¯ä»¥åœ¨å¼ºåŒ–ç•Œé¢è®¾å®šç›®æ ‡ç­‰çº§è‡ªåŠ¨å¼ºåŒ–ï¼Œä¸è¿‡èŠ±è´¹é‡‘å¸ä¸ºæ­£å¸¸å€¼çš„ä¸¤å€
-  ç‚¹å‡»å³ä¸‹è§’æ¸…é™¤å­˜æ¡£å¯ä»¥é‡æ–°å¼€å§‹æ¸¸æˆï¼Œè¯·è°¨æ…æ“ä½œæˆ–è€…å¤‡ä»½åŸæœ‰å­˜æ¡£
-  èƒŒåŒ…ä¸­å¯ä»¥è®¾ç½®è‡ªåŠ¨å‡ºå”®çš„è£…å¤‡ç¨€æœ‰åº¦ç­‰çº§äº†ï¼ˆæ„Ÿè°¢æ‰§ç€çš„bugæäº¤ï¼‰

#### ä¼˜åŒ–

- è°ƒæ•´äº†ä¸€ä¸‹æ‰‹æœºç«¯çš„æ˜¾ç¤ºï¼Œä»åå°æ¥çœ‹ç”¨æ‰‹æœºç©çš„ç”¨æˆ·å¥½åƒä¹Ÿä¸å°‘

#### bug ä¿®å¤

- ä¿®å¤æ‰‹åŠ¨ç»“æŸæŒ‘æˆ˜æ—¶å‡ºç°çš„é”™è¯¯

## 11-26 æ›´æ–°

- ç°åœ¨å¯ä»¥åœ¨æ›´æ–°å…¬å‘Šä¸‹æ–¹ç›´æ¥ææ„è§äº†ï¼Œæˆ–è€…æ˜¯åé¦ˆbugã€‚

#### åŠŸèƒ½è°ƒæ•´

-  å•†åº—æ”¯æŒé‡‘å¸åˆ·æ–°äº†
-  æ— å°½æŒ‘æˆ˜æ·»åŠ è‡ªåŠ¨æŒ‘æˆ˜

#### ä¼˜åŒ–

- ç°åœ¨å¼ºåŒ–åä¼šä¿å­˜æ¸¸æˆï¼ŒåŒæ—¶ç³»ç»Ÿä¿¡æ¯æœ€å¤šæ˜¾ç¤º50æ¡
- ç»§ç»­åŠ å¼ºå‰¯æœ¬
- è°ƒæ•´è£…å¤‡çš„æ•°å€¼

## 11-25 æ›´æ–°

- æ—¶éš”åŠä¸ªå¤šæœˆçš„æ›´æ–°,è¿™æ¬¡ä¿®æ”¹çš„å†…å®¹æ¯”è¾ƒå¤š

#### åŠŸèƒ½è°ƒæ•´

-  æ·»åŠ å¯¼å…¥å¯¼å‡ºå­˜æ¡£åŠŸèƒ½ï¼šèƒŒåŒ…è£…å¤‡è¿‡å¤šå¯èƒ½å¯¼è‡´å­˜æ¡£æ•°æ®æ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥å»ºè®®å¯¼å‡ºå‰å¤„ç†ä¸€ä¸‹èƒŒåŒ…è£…å¤‡ 
-  æ·»åŠ è‡ªåŠ¨å‡ºå”®ï¼šèƒŒåŒ…æ å¯ä»¥å¼€å¯è‡ªåŠ¨å‡ºå”®ï¼Œè‡ªåŠ¨å‡ºå”®ä¼šå–å‡ºä½å“è´¨çš„è£…å¤‡ï¼ˆä½äºç¥å™¨ï¼‰
-  æ·»åŠ è£…å¤‡å¼ºåŒ–ä¸è¯æ¡é‡é“¸ï¼šéœ€è¦é‡‘å¸
-  æ·»åŠ ç‹¬ç‰¹çº§åˆ«çš„é˜²å…·ä¸é¥°å“

#### ä¼˜åŒ–

- åŠ å¼ºå‰¯æœ¬å¼ºåº¦ï¼ˆä¸€çº§å‰¯æœ¬åŸºæœ¬æ²¡æœ‰åŠ å¼ºï¼Œ100çº§å¼ºåº¦å¤§æ¦‚å¢åŠ äº†äº”å€ï¼Œè¿™ä¸ªå¼ºåº¦å˜åŒ–æ˜¯çº¿æ€§çš„ï¼‰
- åŠ äº†ä¸€äº›åŠ¨ç”»
- è£…å¤‡æ•°å€¼è°ƒæ•´
- ç‹¬ç‰¹è£…å¤‡æ‰ç‡ä¿®æ”¹ä¸º4%,å•†åº—æœ‰è¾ƒå°æ¦‚ç‡åˆ·æ–°å‡ºç‹¬ç‰¹è£…å¤‡
- å”®å‡ºè£…å¤‡è·å¾—é‡‘å¸è°ƒé«˜äº†ä¸‰å€ï¼Œå¢åŠ äº†é«˜çº§å‰¯æœ¬é‡‘å¸è·å–

#### bug ä¿®å¤

- ä¿®å¤è‡ªåŠ¨å‡ºå”®å¯èƒ½å°†èƒŒåŒ…å…¶ä½™è£…å¤‡å–å‡ºçš„bug

## 11-9 æ›´æ–°

#### åŠŸèƒ½è°ƒæ•´

- é€‚é…ç§»åŠ¨ç«¯

## 11-6 æ›´æ–°

#### åŠŸèƒ½è°ƒæ•´

- ï¼ˆåŠŸèƒ½ï¼‰æ·»åŠ è£…å¤‡é”å®šåŠŸèƒ½
- ï¼ˆåŠŸèƒ½ï¼‰è£…å¤‡æ–°å¢ç™¾åˆ†æ¯”è¯æ¡
- ï¼ˆåŠŸèƒ½ï¼‰æ·»åŠ  60~100 çº§å‰¯æœ¬
- ï¼ˆåŠŸèƒ½ï¼‰å®Œæˆå‰¯æœ¬æ—¶å¯èƒ½æ‰è½ç‹¬ç‰¹çº§åˆ«çš„è£…å¤‡ï¼ˆé€šå…³å 2.5%æ‰è½ç‡ï¼Œæ— å°½æŒ‘æˆ˜ä¸ä¼šæ‰è½ï¼‰
- ï¼ˆåŠŸèƒ½ï¼‰é€šå…³åå¼€å¯æ— å°½æŒ‘æˆ˜

#### ä¼˜åŒ–

- ï¼ˆä¼˜åŒ–ï¼‰è°ƒæ•´äº†å•†åº—ä»·æ ¼ï¼ˆå‰æœŸæ›´ä½ï¼ŒåæœŸæ›´é«˜ï¼‰ï¼Œç°åœ¨å•†åº—ç­‰çº§æœ€é«˜ä¸º 110 çº§
- ï¼ˆä¼˜åŒ–ï¼‰è°ƒæ•´å¹¶æ·»åŠ äº†ä¸€äº›æ–°è£…å¤‡
- ï¼ˆä¼˜åŒ–ï¼‰ä¸Šè°ƒäº† 90 ä¸ 100 çº§å‰¯æœ¬çš„éš¾åº¦

#### bug ä¿®å¤

- ï¼ˆbugï¼‰ä¿®å¤äº†æ‰‹åŠ¨ç»“æŸå‰¯æœ¬æŒ‘æˆ˜å¯èƒ½å¯¼è‡´å‰¯æœ¬åŠ é€Ÿçš„ bug

## 11-4 æ›´æ–°

è¿™æ¬¡æ›´æ–°ä¼˜å…ˆæ·»åŠ äº†ä¸‹é¢è¿™äº›æ¯”è¾ƒé‡è¦çš„åŠŸèƒ½ï¼Œä»¥åŠä¿®å¤äº†ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„ bugï¼Œåç»­çš„æ›´æ–°å°†ä¼šç€é‡äºæ¸¸æˆå†…å®¹ã€‚

#### åŠŸèƒ½è°ƒæ•´

- ï¼ˆåŠŸèƒ½ï¼‰æ·»åŠ è‡ªåŠ¨æŒ‘æˆ˜åŠŸèƒ½ï¼ˆè£…å¤‡å¤šäº 25 ä»¶æ—¶è‡ªåŠ¨åœæ­¢ï¼‰
- ï¼ˆåŠŸèƒ½ï¼‰æ‰‹åŠ¨ä¸­æ–­å‰¯æœ¬æŒ‘æˆ˜
- ï¼ˆåŠŸèƒ½ï¼‰äº”åˆ†é’Ÿè‡ªåŠ¨ä¿å­˜æ¸¸æˆ

#### ä¼˜åŒ–

- ï¼ˆä¼˜åŒ–ï¼‰æ·»åŠ èƒŒåŒ…å®¹é‡æŒ‡ç¤ºï¼Œé«˜äº 25 ä»¶è£…å¤‡ä¼šæœ‰æç¤º
- ï¼ˆä¼˜åŒ–ï¼‰å†æ¬¡å¤§å¹…åŠ å¼ºæš´å‡»ä¸æš´å‡»ä¼¤å®³ï¼Œä¸æ­¤åŒæ—¶åŠ å¼ºäº†ä¸€ä¸¢ä¸¢ 60 çº§å‰¯æœ¬

#### bug ä¿®å¤

- ï¼ˆbugï¼‰ä¿®å¤äº†ç¬¬ä¸€æ¬¡è¿›æ¸¸æˆä¸æ˜¾ç¤ºè£…å¤‡å¯¹æ¯”ä¿¡æ¯çš„ bug
- ï¼ˆbugï¼‰å‰¯æœ¬è¿›ç¨‹ä¸­åˆ‡æ¢è‡³åå°å°†ä¸èƒ½å›è¡€ï¼ˆéå‰¯æœ¬çŠ¶æ€ä»ç„¶å¯ä»¥ï¼‰
- ï¼ˆbugï¼‰æŸäº›æƒ…å†µä¸‹é‡‘å¸å¹¶ä¸æ˜¯æ•´æ•°

# æœ¬åœ°è¿è¡Œ

### å®‰è£…ä¾èµ–

```sh
  npm install
```

### å¯åŠ¨é¡¹ç›®

```sh
  npm run serve
```

### æ‰“åŒ…é¡¹ç›®

```sh
  npm run build
```

'''
'''--- vue-frontend/babel.config.js ---
module.exports = {
  presets: [
    '@vue/app'
  ]
}

'''
'''--- vue-frontend/package.json ---
{
  "name": "COUY-RPG",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "serve": "vue-cli-service serve",
    "build": "vue-cli-service build"
  },
  "dependencies": {
    "axios": "^0.21.0",
    "core-js": "^2.6.5",
    "js-base64": "^3.5.2",
    "near-api-js": "^0.27.0",
    "vue": "^2.6.10",
    "vue-router": "^3.0.3",
    "vuex": "^3.0.1"
  },
  "devDependencies": {
    "@vue/cli-plugin-babel": "^3.9.0",
    "@vue/cli-service": "^3.9.0",
    "compression-webpack-plugin": "^6.1.1",
    "compressorjs": "^1.0.6",
    "node-sass": "^4.9.0",
    "sass-loader": "^7.1.0",
    "vue-template-compiler": "^2.6.10"
  },
  "postcss": {
    "plugins": {
      "autoprefixer": {}
    }
  },
  "browserslist": [
    "> 1%",
    "last 2 versions"
  ]
}

'''
'''--- vue-frontend/public/index.html ---
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta name="Description" content="ä¸€ä¸ªå…¨éšæœºçš„åˆ·è£…å¤‡å°æ¸¸æˆ" />
  <meta name="Keywords" content="æ¸¸æˆ,couy,idle,æ”¾ç½®æ¸¸æˆ,vue,couy.xyz,rougelike" />
  <!-- <link rel="icon" href="./fi.png"> -->
  <title>couy-idleGame</title>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?559bf4473cdb0f595d39688e01027947";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</head>

<body>
  <noscript>
    <strong>We're sorry but elevato-html doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
  </noscript>
  <div id="app"></div>
  <!-- built files will be auto injected -->
</body>
</html>
'''
'''--- vue-frontend/src/assets/config/equiAttributeArmor.js ---
/**
 * æŠ¤ç”²å±æ€§é…ç½®æ–‡ä»¶
 * @author couy
 */

export const equiAttributeArmor = {
  data(){
    return{
      qualityArmor: [{
        name: 'ç ´æ—§',
        qualityCoefficient: 0.7,
        probability: '0.25',
        color: '#a1a1a1',
        extraEntryNum: 1,
      }, {
        name: 'æ™®é€š',
        qualityCoefficient: 1,
        probability: '0.55',
        color: '#fff', extraEntryNum: 2,
      }, {
        name: 'ç¥å™¨',
        qualityCoefficient: 1.5,
        probability: '0.15',
        color: '#ff00ff', extraEntryNum: 3,
      }, {
        name: 'å²è¯—',
        qualityCoefficient: 2,
        probability: '0.05',
        color: '#f78918', extraEntryNum: 4,
      }, {
        name: 'ç‹¬ç‰¹',
        qualityCoefficient: 2.2,
        probability: '0',
        color: '#ff0000', extraEntryNum: 5,
      }],
      extraEntryArmor: [{
        'value': '11',
        'showVal': '+11',
        type: 'ATK',
        'name': 'æ”»å‡»åŠ›'
      }, {
        type: 'HP',
        'value': '20',
        'showVal': '+20',
        'name': 'ç”Ÿå‘½å€¼'
      }, {
        type: 'DEF',
        'value': '8',
        'showVal': '+8%',
        'name': 'é˜²å¾¡åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'DEFPERCENT',
        'name': 'é˜²å¾¡åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'HPPERCENT',
        'name': 'ç”Ÿå‘½å€¼'
      },],
      uniqueCategoryArmor: [{
        name: 'çº¢æœˆçš„å¤œè¡Œè¡£',
        des: '',
        iconSrc: './icons/U_Armor06.png',
        entry: [{
          'valCoefficient': 1.2,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          type: 'HP',
          'valCoefficient': 1.5,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        }, {
          'valCoefficient': 1.2,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
      }, {
        name: 'è‚ƒæ¸…è€…æˆè¡£',
        des: 'ç›¸ä¼ çœ‹åˆ°è¿™ä¸€è¢­é»‘è¡£çš„äººéƒ½æ­»äº†ã€‚',
        iconSrc: './icons/U_Armor05.png',
        entry: [{
          type: 'HP',
          'valCoefficient': 1.6,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        }, {
          'valCoefficient': 2.4,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        },{
          'valCoefficient': 1.2,
          'value': '11',
          'showVal': '+11',
          type: 'BLOC',
          'name': 'æ ¼æŒ¡'
        },]
      }, {
        name: 'äº‰æ‰§è¿èº«è¡£',
        des: '',
        iconSrc: './icons/U_Armor01.png',
        entry: [{
          'valCoefficient': 1.0,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          type: 'HP',
          'valCoefficient': 1.4,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        }, {
          'valCoefficient': 1.4,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
      }, {
        name: 'å‰‘è±ªç›”ç”²',
        des: '',
        iconSrc: './icons/U_Armor02.png',
        entry: [{
          'valCoefficient': 2.1,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          type: 'HP',
          'valCoefficient': 2.6,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        }]
      }, {
        name: 'éšæ­¦å£«é“ ç”²',
        des: '',
        iconSrc: './icons/U_Armor03.png',
        entry: [{
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          type: 'HP',
          'valCoefficient': 1.7,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        }, {
          'valCoefficient': 0.9,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
      }, {
        name: 'èŠ¬æ’’é‡Œå°”è¿½è¸ªè€…',
        des: '',
        iconSrc: './icons/U_Armor04.png',
        entry: [{
          'valCoefficient': 0.9,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          'valCoefficient': 1.7,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }, {
          'valCoefficient': 1.7,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
      },{
        name: 'å…ˆä»£ç‹‚é¾™æˆ˜å£«ç›”ç”²',
        des: '',
        iconSrc: './icons/U_Armor07.png',
        entry: [{
          'valCoefficient': 1.5,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          'valCoefficient': 1.2,
          'value': '11',
          'showVal': '+11',
          type: 'BLOC',
          'name': 'æ ¼æŒ¡'
        },{
          type: 'HP',
          'valCoefficient': 1.4,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        },]
      },],
      categoryArmor: [
        {
          name: 'ç´«é‡‘å®ˆæŠ¤èƒ¸ç”²',
          des: 'å¤Ÿè‚‰æ‰èƒ½è¾“å‡º',
          iconSrc: './icons/A_A2.png',
          entry: [{
            'valCoefficient': 2,
            'value': '11',
            'showVal': '+11',
            type: 'DEF',
            'name': 'é˜²å¾¡åŠ›'
          }, {
            type: 'HP',
            'valCoefficient': 0.6,
            'value': '8',
            'showVal': '8',
            'name': 'ç”Ÿå‘½å€¼'
          }]
        },
        {
          name: 'æˆ˜å£«é‡é“ ',
          des: 'å…­çº§æˆ˜å£«ä½¿ç”¨çš„é‡å‹é“ ç”²',
          iconSrc: './icons/A_A5.png',
          entry: [{
            'valCoefficient': 1.1,
            'value': '11',
            'showVal': '+11',
            type: 'DEF',
            'name': 'é˜²å¾¡åŠ›'
          }, {
            type: 'HP',
            'valCoefficient': 0.8,
            'value': '8',
            'showVal': '8',
            'name': 'ç”Ÿå‘½å€¼'
          }]
        },
        {
          name: 'å¤©æƒè½»ç”²',
          des: 'èˆå¼ƒäº†é˜²å¾¡æ€§èƒ½çš„è½»ç”²ï¼Œå› ä¸ºæ›´åŠ è½»ä¾¿ï¼Œæ”»å‡»æ€§èƒ½æ›´åŠ çªå‡º',
          iconSrc: './icons/A_A7.png',
          entry: [{
            'valCoefficient': 0.7,
            'value': '11',
            'showVal': '+11',
            type: 'DEF',
            'name': 'é˜²å¾¡åŠ›'
          }, {
            type: 'HP',
            'valCoefficient': 0.5,
            'value': '8',
            'showVal': '8',
            'name': 'ç”Ÿå‘½å€¼'
          }, {
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'ATK',
            'name': 'æ”»å‡»åŠ›'
          }]
        },
        {
          name: 'èµ¤æŸ³è¡€é“ ',
          des: 'ä¼¼ä¹ä¼šç»™ä½¿ç”¨è€…æä¾›ç”Ÿå‘½æ°”æ¯',
          iconSrc: './icons/A_A3.png',
          entry: [{
            'valCoefficient': 0.9,
            'value': '11',
            'showVal': '+11',
            type: 'DEF',
            'name': 'é˜²å¾¡åŠ›'
          }, {
            type: 'HP',
            'valCoefficient': 1.2,
            'value': '8',
            'showVal': '8',
            'name': 'ç”Ÿå‘½å€¼'
          }]
        },
        {
          name: 'å“ˆçš®æ¯›æ¯›è¿èº«è¡£',
          des: 'å“ˆçš®æ¯›æ¯›',
          iconSrc: './icons/A_A9.png',
          entry: [{
            'valCoefficient': 0.8,
            'value': '11',
            'showVal': '+11',
            type: 'DEF',
            'name': 'é˜²å¾¡åŠ›'
          }, {
            type: 'HP',
            'valCoefficient': 0.8,
            'value': '8',
            'showVal': '8',
            'name': 'ç”Ÿå‘½å€¼'
          }, {
            'valCoefficient': 0.4,
            'value': '11',
            'showVal': '+11',
            type: 'ATK',
            'name': 'æ”»å‡»åŠ›'
          }]
        }
      ],
    }
  },
  methods: {
  }
};
'''
'''--- vue-frontend/src/assets/config/equiAttributeNeck.js ---
/**
 * é¡¹é“¾å±æ€§é…ç½®æ–‡ä»¶
 * @author couy
 */

export const equiAttributeNeck = {
  data(){
    return{
      qualityNeck: [{
        name: 'ç ´æ—§',
        qualityCoefficient: 0.6,
        probability: '0.25',
        color: '#a1a1a1',
        extraEntryNum: 1,
      }, {
        name: 'æ™®é€š',
        qualityCoefficient: 0.9,
        probability: '0.55',
        color: '#fff', extraEntryNum: 2,
      }, {
        name: 'ç¥å™¨',
        qualityCoefficient: 1.3,
        probability: '0.15',
        color: '#ff00ff', extraEntryNum: 3,
      }, {
        name: 'å²è¯—',
        qualityCoefficient: 1.6,
        probability: '0.05',
        color: '#f78918', extraEntryNum: 4,
      }, {
        name: 'ç‹¬ç‰¹',
        qualityCoefficient: 2,
        probability: '0',
        color: '#ff0000', extraEntryNum: 5,
      }],
      extraEntryNeck: [{
        'value': '11',
        'showVal': '+11',
        type: 'ATK',
        'name': 'æ”»å‡»åŠ›'
      }, {
        type: 'HP',
        'value': '20',
        'showVal': '+20',
        'name': 'ç”Ÿå‘½å€¼'
      }, {
        type: 'DEF',
        'value': '8',
        'showVal': '+8%',
        'name': 'é˜²å¾¡åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'DEFPERCENT',
        'name': 'é˜²å¾¡åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'HPPERCENT',
        'name': 'ç”Ÿå‘½å€¼'
      },],
      uniqueCategoryNeck: [{
        name: 'åå­—æ—…å›¢é™é­”é¡¹é“¾',
        des: '',
        iconSrc: './icons/U_neck01.png',
        entry: [{
          'valCoefficient': 0.7,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          'valCoefficient': 0.8,
          'value': '11',
          'showVal': '+11',
          type: 'HP',
          'name': 'ç”Ÿå‘½å€¼'
        }, {
          'valCoefficient': 0.9,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }]
      }, {
        name: 'è¿›é˜¶é»‘æš—é¾™ç‹é¡¹é“¾',
        des: '',
        iconSrc: './icons/U_neck02.png',
        entry: [{
          'valCoefficient': 1.0,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }, {
          'valCoefficient': 0.5,
          'value': '11',
          'showVal': '+11',
          type: 'CRIT',
          'name': 'æš´å‡»ç‡'
        }, {
          'valCoefficient': 0.8,
          'value': '11',
          'showVal': '+11',
          type: 'HP',
          'name': 'ç”Ÿå‘½å€¼'
        }]
      }, {
        name: 'ä¼Ÿå¤§å•èº«æˆå‘˜çš„é¡¹é“¾',
        des: 'çœŸæ£’ï¼ŒçœŸå¸…ã€‚æœ‰äº†è¿™æ¡å¸…æ°”çš„é¡¹é“¾ï¼Œä¸€è¾ˆå­å•èº«éƒ½ä¸ä¼šå­¤ç‹¬',
        iconSrc: './icons/U_neck03.png',
        entry: [{
          'valCoefficient': 1.0,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }, {
          'valCoefficient': 1.2,
          'value': '11',
          'showVal': '+11',
          type: 'BLOC',
          'name': 'æ ¼æŒ¡'
        }, {
          'valCoefficient': 0.7,
          'value': '11',
          'showVal': '+11',
          type: 'HP',
          'name': 'ç”Ÿå‘½å€¼'
        }]
      }, {
        name: 'é­”æ—ä¹‹ç¿¼å±•',
        des: 'ä½ èƒ½çœ‹åˆ°ä»€ä¹ˆå‘¢',
        iconSrc: './icons/U_neck04.png',
        entry: [{
          'valCoefficient': 1.6,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }, {
          'valCoefficient': 1.6,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        },]
      }, {
        name: 'ä¼Šå¸•å¨…ä¹‹é¡¹é“¾',
        des: '',
        iconSrc: './icons/U_neck05.png',
        entry: [{
          'valCoefficient': 0.9,
          'value': '11',
          'showVal': '+11',
          type: 'BLOC',
          'name': 'æ ¼æŒ¡'
        }, {
          'valCoefficient': 0.9,
          'value': '11',
          'showVal': '+11',
          type: 'DEF',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'HP',
          'name': 'ç”Ÿå‘½å€¼'
        }]
      }],
      categoryNeck: [
        {
          name: 'åå­—å†›é¡¹é“¾',
          des: 'åå­—å†›ä½©æˆ´çš„é¡¹é“¾',
          iconSrc: './icons/Ac_1.png',
          entry: [{
            'valCoefficient': 0.9,
            'value': '11',
            'showVal': '+11',
            type: 'DEF',
            'name': 'é˜²å¾¡åŠ›'
          }, {
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          },{
          'valCoefficient': 0.6,
          'value': '11',
          'showVal': '+11',
          type: 'BLOC',
          'name': 'æ ¼æŒ¡'
        }]
        },
        {
          name: 'å†°é¾™å‡é›ª',
          des: 'å†°é¾™å‡é›ª',
          iconSrc: './icons/Ac_7.png',
          entry: [{
            'valCoefficient': 0.75,
            'value': '11',
            'showVal': '+11',
            type: 'CRITDMG',
            'name': 'æš´å‡»ä¼¤å®³'
          }, {
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'CRIT',
            'name': 'æš´å‡»ç‡'
          }, {
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          }]
        },
        {
          name: 'é“¶é­‚ä¹‹çœ¼',
          des: 'é“¶é­‚ä¹‹çœ¼',
          iconSrc: './icons/Ac_5.png',
          entry: [{
            'valCoefficient': 1.1,
            'value': '11',
            'showVal': '+11',
            type: 'CRIT',
            'name': 'æš´å‡»ç‡'
          }, {
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          }, {
          'valCoefficient': 0.6,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
        }
      ],
      extraEntryNeck: [{
        'value': '11',
        'showVal': '+11',
        type: 'ATK',
        'name': 'æ”»å‡»åŠ›'
      }, {
        type: 'CRIT',
        'value': '8',
        'showVal': '+8%',
        'name': 'æš´å‡»ç‡'
      }, {
        type: 'CRITDMG',
        'value': '20',
        'showVal': '+20%',
        'name': 'æš´å‡»ä¼¤å®³'
      }, {
        type: 'HP',
        'value': '20',
        'showVal': '+20',
        'name': 'ç”Ÿå‘½å€¼'
      }, {
        type: 'DEF',
        'value': '8',
        'showVal': '+8%',
        'name': 'é˜²å¾¡åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'BLOC',
        'name': 'æ ¼æŒ¡'
      }]
    }
  },
  methods: {
  }
};
'''
'''--- vue-frontend/src/assets/config/equiAttributeRing.js ---
/**
 * æˆ’æŒ‡å±æ€§é…ç½®æ–‡ä»¶
 * @author couy
 */

export const equiAttributeRing = {
  data(){
    return{
      quality: [{
        name: 'ç ´æ—§',
        qualityCoefficient: 0.6,
        probability: '0.25',
        color: '#a1a1a1',
        extraEntryNum: 1,
      }, {
        name: 'æ™®é€š',
        qualityCoefficient: 0.9,
        probability: '0.55',
        color: '#fff', extraEntryNum: 2,
      }, {
        name: 'ç¥å™¨',
        qualityCoefficient: 1.3,
        probability: '0.15',
        color: '#ff00ff', extraEntryNum: 3,
      }, {
        name: 'å²è¯—',
        qualityCoefficient: 1.6,
        probability: '0.05',
        color: '#f78918', extraEntryNum: 4,
      }, {
        name: 'ç‹¬ç‰¹',
        qualityCoefficient: 2,
        probability: '0',
        color: '#ff0000', extraEntryNum: 5,
      }],
      uniqueCategory: [{
        name: 'çœŸÂ·æ¯›æ¯›æŒ‡ç¯',
        des: '',
        iconSrc: './icons/U_ring02.png',
        entry: [{
            'valCoefficient': 1.2,
            'value': '11',
            'showVal': '+11',
            type: 'CRITDMG',
            'name': 'æš´å‡»ä¼¤å®³'
          },{
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'CRIT',
            'name': 'æš´å‡»ç‡'
          },{
            'valCoefficient': 0.7,
            'value': '11',
            'showVal': '+11',
            type: 'ATK',
            'name': 'æ”»å‡»åŠ›'
          },]
      },{
        name: 'æ­»ç¥åç‰‡æˆ’æŒ‡',
        des: '',
        iconSrc: './icons/U_ring01.png',
        entry: [{
            'valCoefficient': 1.0,
            'value': '11',
            'showVal': '+11',
            type: 'CRITDMG',
            'name': 'æš´å‡»ä¼¤å®³'
          },{
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'CRIT',
            'name': 'æš´å‡»ç‡'
          },{
            'valCoefficient': 0.8,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          }]
      },{
        name: 'å…ˆé©±è€…æˆ’æŒ‡',
        des: '',
        iconSrc: './icons/U_ring03.png',
        entry: [{
            'valCoefficient': 1.0,
            'value': '11',
            'showVal': '+11',
            type: 'CRITDMG',
            'name': 'æš´å‡»ä¼¤å®³'
          },{
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'CRIT',
            'name': 'æš´å‡»ç‡'
          },{
            'valCoefficient': 0.7,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          }]
      },{
        name: 'ç´ ç›å‘œå°Šçš„æ„å¿—',
        des: '',
        iconSrc: './icons/U_ring04.png',
        entry: [{
            'valCoefficient': 1.6,
            'value': '11',
            'showVal': '+11',
            type: 'CRITDMG',
            'name': 'æš´å‡»ä¼¤å®³'
          },{
            'valCoefficient': 1.1,
            'value': '11',
            'showVal': '+11',
            type: 'ATK',
            'name': 'æ”»å‡»åŠ›'
          },]
      },{
        name: 'æœˆå¤œè§å°Šçš„æ„å¿—',
        des: '',
        iconSrc: './icons/U_ring05.png',
        entry: [{
            'valCoefficient': 1.5,
            'value': '11',
            'showVal': '+11',
            type: 'CRITDMG',
            'name': 'æš´å‡»ä¼¤å®³'
          },{
            'valCoefficient': 1.2,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          }]
      },],
      category: [
        {
          name: 'ç”Ÿå‘½æŒ‡ç¯',
          des: 'æ®è¯´æ‹¥æœ‰å¢å¼ºä½©æˆ´è€…ä½“è´¨çš„ç¥ç§˜åŠŸæ•ˆ',
          iconSrc: './icons/Ac_9.png',
          entry: [{
            'valCoefficient': 1.1,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          }]
        },
        {
          name: 'æ¯›æ¯›æŒ‡ç¯',
          des: 'å–µå–µæˆ’æŒ‡ï¼Œä¸Šé¢æœ‰æ²¡æœ‰æ‘¸åˆ°æ¯›æ¯›jioçš„æ€¨å¿µ',
          iconSrc: './icons/Ac_11.png',
          entry: [{
            'valCoefficient': 0.9,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          },{
            'valCoefficient': 0.3,
            'value': '11',
            'showVal': '+11',
            type: 'ATK',
            'name': 'æ”»å‡»åŠ›'
          },{
            'valCoefficient': 0.8,
            'value': '11',
            'showVal': '+11',
            type: 'CRIT',
            'name': 'æš´å‡»ç‡'
          },]
        },
        {
          name: 'å¾¡é­‚ä¹‹æˆ’',
          des: 'å‡ºæ¥å§ï¼Œå¡èµï¼å¸çº³æ‰€æœ‰å½·å¾¨çš„çµé­‚ï¼   â€”â€”é¬¼å‰‘å£«çº¦ç¿°',
          iconSrc: './icons/Ac_10.png',
          entry: [{
            'valCoefficient': 0.7,
            'value': '11',
            'showVal': '+11',
            type: 'HP',
            'name': 'ç”Ÿå‘½å€¼'
          },{
            'valCoefficient': 0.5,
            'value': '11',
            'showVal': '+11',
            type: 'ATK',
            'name': 'æ”»å‡»åŠ›'
          },]
        },
      ],
      extraEntry: [{
        'value': '11',
        'showVal': '+11',
        type: 'ATK',
        'name': 'æ”»å‡»åŠ›'
      }, {
        type: 'CRIT',
        'value': '8',
        'showVal': '+8%',
        'name': 'æš´å‡»ç‡'
      }, {
        type: 'CRITDMG',
        'value': '20',
        'showVal': '+20%',
        'name': 'æš´å‡»ä¼¤å®³'
      }, {
        type: 'HP',
        'value': '20',
        'showVal': '+20',
        'name': 'ç”Ÿå‘½å€¼'
      }, {
        type: 'DEF',
        'value': '8',
        'showVal': '+8%',
        'name': 'é˜²å¾¡åŠ›'
      }]
    }
  },
  methods: {
  }
};
'''
'''--- vue-frontend/src/assets/config/equiAttributeWeapon.js ---
/**
 * æ­¦å™¨å±æ€§é…ç½®æ–‡ä»¶
 * @author couy
 */

export const equiAttributeWeapon = {
  data(){
    return {
      quality: [{
        name: 'ç ´æ—§',
        qualityCoefficient: 0.7,
        probability: '0.25',
        color: '#a1a1a1',
        extraEntryNum: 1,
      }, {
        name: 'æ™®é€š',
        qualityCoefficient: 1,
        probability: '0.55',
        color: '#fff', extraEntryNum: 2,
      }, {
        name: 'ç¥å™¨',
        qualityCoefficient: 1.5,
        probability: '0.15',
        color: '#ff00ff', extraEntryNum: 3,
      }, {
        name: 'å²è¯—',
        qualityCoefficient: 2,
        probability: '0.05',
        color: '#f78918', extraEntryNum: 4,
      }, {
        name: 'ç‹¬ç‰¹',
        qualityCoefficient: 2.2,
        probability: '0',
        color: '#ff0000', extraEntryNum: 5,
      }],
      uniqueCategory: [{
        name: 'åˆ›ä¸–äº¡å‘½å‰‘',
        des: 'åªæœ‰è¢«é€‰ä¸­çš„å‹‡å£«æ‰èƒ½å”¤é†’å®ƒçœŸæ­£çš„åŠ›é‡ã€‚',
        iconSrc: './icons/U_Sword01.png',
        entry: [{
          'valCoefficient': 1.8,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'CRIT',
          'valCoefficient': 1.5,
          'value': '8',
          'showVal': '+8%',
          'name': 'æš´å‡»ç‡'
        }, {
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }]
      }, {
        name: 'æ— åå‰‘',
        des: 'æ²¡æœ‰äººçŸ¥é“å®ƒçš„æ¥å†ã€‚',
        iconSrc: './icons/U_Sword02.png',
        entry: [{
          'valCoefficient': 2.7,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'CRIT',
          'valCoefficient': 2.5,
          'value': '8',
          'showVal': '+8%',
          'name': 'æš´å‡»ç‡'
        }]
      }, {
        name: 'æ­»äº¡ä¹‹åˆƒ',
        des: 'ä¸‡ç‰©ç”Ÿè‡ªå®ˆæ’ï¼ŒæºåŠ›ç ´åˆ™å¤±ã€‚',
        iconSrc: './icons/U_Sword04.png',
        entry: [{
          'valCoefficient': 1.8,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'CRIT',
          'valCoefficient': 1.5,
          'value': '8',
          'showVal': '+8%',
          'name': 'æš´å‡»ç‡'
        }, {
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }]
      }, {
        name: 'éœœé¾™åˆ©åˆƒ',
        des: 'å‚²é›ªå†·å¿ƒç»ï¼Œä¸‡å¿µåŒ–å†°åã€‚',
        iconSrc: './icons/U_Sword05.png',
        entry: [{
          'valCoefficient': 1.8,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'CRIT',
          'valCoefficient': 1.5,
          'value': '8',
          'showVal': '+8%',
          'name': 'æš´å‡»ç‡'
        }, {
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }]
      }, {
        name: 'é˜¿åŠ é›·æ–¯è¡€è‰²å·¨å‰‘',
        des: 'è¯šæ—¢å‹‡å…®åˆä»¥æ­¦ï¼Œç»ˆåˆšå¼ºå…®ä¸å¯å‡Œã€‚èº«æ—¢æ­»å…®ç¥ä»¥çµï¼Œå­é­‚é­„å…®ä¸ºé¬¼é›„ã€‚',
        iconSrc: './icons/U_Sword03.png',
        entry: [{
          'valCoefficient': 1.8,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'CRIT',
          'valCoefficient': 1.5,
          'value': '8',
          'showVal': '+8%',
          'name': 'æš´å‡»ç‡'
        }, {
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }]
      }, {
        name: 'ç¥é¾™çº³æ ¼æ—ä¹‹åˆƒ',
        des: 'ç¥é¾™çº³æ ¼æ—çš„çˆªå­é”»é€ çš„åˆ©åˆƒ',
        iconSrc: './icons/U_Sword06.png',
        entry: [{
          'valCoefficient': 2.8,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          'valCoefficient': 2.2,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }]
      }, {
        name: 'å¤§å¸ˆå¤§å†’é™©å®¶ä¹‹å‰‘',
        des: 'å¤§å¸ˆå¤§å†’é™©å®¶ä¹‹å‰‘',
        iconSrc: './icons/U_Sword07.png',
        entry: [{
          'valCoefficient': 2.4,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'HP',
          'valCoefficient': 1.8,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        }]
      }, {
        name: 'å…­ç¿¼å¤©ä½¿æ­¦åˆƒ',
        des: 'å…­ç¿¼å¤©ä½¿æ­¦åˆƒ',
        iconSrc: './icons/U_Sword08.png',
        entry: [{
          'valCoefficient': 2.6,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'DEF',
          'valCoefficient': 1.8,
          'value': '8',
          'showVal': '8',
          'name': 'é˜²å¾¡åŠ›'
        }]
      }, {
        name: 'æ•°ç ä¸¸æ’æ¬¡',
        des: 'å…·ä½“æƒ…å†µä¸æ˜ï¼Œä¼ è¯´ä¸ºæ—¥è²ä¸Šäººæ‰€æœ‰',
        iconSrc: './icons/U_Sword09.png',
        entry: [{
          'valCoefficient': 3.9,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
      }, {
        name: 'åŸƒè‹è±å¸ƒæ–¯å†›åˆ€',
        des: '',
        iconSrc: './icons/U_Sword10.png',
        entry: [{
          'valCoefficient': 1.9,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'DEF',
          'valCoefficient': 1.2,
          'value': '8',
          'showVal': '8',
          'name': 'é˜²å¾¡åŠ›'
        }, {
          type: 'BLOC',
          'valCoefficient': 1.2,
          'value': '8',
          'showVal': '8',
          'name': 'æ ¼æŒ¡'
        }]
      },],
      category: [{
        name: 'ç‹±å²©çŸ³å¤ªåˆ€',
        des: 'ç”¨ç‹±å²©çŸ³åˆ¶ä½œçš„å¤ªåˆ€ï¼Œæ®è¯´æ‹¥æœ‰è®©ä½¿ç”¨è€…æ½œåŠ›çˆ†å‘çš„ç¥ç§˜åŠ›é‡',
        iconSrc: './icons/W_Sword016.png',
        entry: [{
          'valCoefficient': 1.2,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'CRIT',
          'valCoefficient': 1.3,
          'value': '8',
          'showVal': '+8%',
          'name': 'æš´å‡»ç‡'
        }]
      },
      {
        name: 'æˆ˜å£«é•¿å‰‘',
        des: 'å…­çº§æˆ˜å£«ä½¿ç”¨çš„é•¿å‰‘',
        iconSrc: './icons/W_Sword007.png',
        entry: [{
          'valCoefficient': 1.2,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'DEF',
          'valCoefficient': 0.5,
          'value': '8',
          'showVal': '8',
          'name': 'é˜²å¾¡åŠ›'
        }]
      },
      {
        name: 'èµ¤æŸ³è¡€åˆƒ',
        des: 'ä¼¼ä¹ä¼šç»™ä½¿ç”¨è€…æä¾›ç”Ÿå‘½æ°”æ¯',
        iconSrc: './icons/W_Sword019.png',
        entry: [{
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'HP',
          'valCoefficient': 1.1,
          'value': '8',
          'showVal': '8',
          'name': 'ç”Ÿå‘½å€¼'
        }]
      },
      {
        name: 'æ™®é€šé•¿å‰‘',
        des: 'æœ´å®æ— åæ™®é€šé•¿å‰‘ï¼Œæœ‰çš„åªæœ‰å¼ºåŠ›çš„æ”»å‡»åŠ›',
        iconSrc: './icons/W_Sword001.png',
        entry: [{
          'valCoefficient': 1.7,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
      }
        ,
      {
        name: 'ç´«ç‚æ³¢åˆƒå‰‘',
        des: 'ä¼ è¯´ä¸­çš„ç‹‚æˆ˜å£«æœ€å–œçˆ±çš„å‰‘ã€‚',
        iconSrc: './icons/W_Sword021.png',
        entry: [{
          'valCoefficient': 1.7,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }]
      },
      {
        name: 'æ¯›æ¯›çš„çˆªå­',
        des: 'è¿™ï¼Ÿè¿™ä¹Ÿæ˜¯æ­¦å™¨ï¼Ÿ',
        iconSrc: './icons/W_Fist003.png',
        entry: [{
          'valCoefficient': 2,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          type: 'CRIT',
          'valCoefficient': 0.7,
          'value': '8',
          'showVal': '+8%',
          'name': 'æš´å‡»ç‡'
        }]
      },
      {
        name: 'å†°æ™¶ä¹‹åˆƒ',
        des: 'å‰‘é”‹è¦†ç›–ç€å†°æ™¶ï¼Œç¢°åˆ°çš„æ•Œäººéƒ½ä¼šè¢«å†»ä½ã€‚',
        iconSrc: './icons/W_Sword018.png',
        entry: [{
          'valCoefficient': 1.4,
          'value': '11',
          'showVal': '+11',
          type: 'ATK',
          'name': 'æ”»å‡»åŠ›'
        }, {
          'valCoefficient': 1.3,
          'value': '11',
          'showVal': '+11',
          type: 'CRITDMG',
          'name': 'æš´å‡»ä¼¤å®³'
        }]
      }
      ],
      extraEntry: [{
        'value': '11',
        'showVal': '+11',
        type: 'ATK',
        'name': 'æ”»å‡»åŠ›'
      }, {
        type: 'CRIT',
        'value': '8',
        'showVal': '+8%',
        'name': 'æš´å‡»ç‡'
      }, {
        type: 'CRITDMG',
        'value': '20',
        'showVal': '+20%',
        'name': 'æš´å‡»ä¼¤å®³'
      }, {
        type: 'HP',
        'value': '20',
        'showVal': '+20',
        'name': 'ç”Ÿå‘½å€¼'
      }, {
        type: 'DEF',
        'value': '8',
        'showVal': '+8%',
        'name': 'é˜²å¾¡åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'ATKPERCENT',
        'name': 'æ”»å‡»åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'DEFPERCENT',
        'name': 'é˜²å¾¡åŠ›'
      }, {
        'value': '11%',
        'showVal': '+11%',
        type: 'HPPERCENT',
        'name': 'ç”Ÿå‘½å€¼'
      },]
    }
  },
  methods: {
  }
};
'''
'''--- vue-frontend/src/assets/icons/github.svg ---
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 36 36" enable-background="new 0 0 36 36" xml:space="preserve">
<path fill-rule="evenodd" clip-rule="evenodd" fill="#191717" d="M18,1.4C9,1.4,1.7,8.7,1.7,17.7c0,7.2,4.7,13.3,11.1,15.5
	c0.8,0.1,1.1-0.4,1.1-0.8c0-0.4,0-1.4,0-2.8c-4.5,1-5.5-2.2-5.5-2.2c-0.7-1.9-1.8-2.4-1.8-2.4c-1.5-1,0.1-1,0.1-1
	c1.6,0.1,2.5,1.7,2.5,1.7c1.5,2.5,3.8,1.8,4.7,1.4c0.1-1.1,0.6-1.8,1-2.2c-3.6-0.4-7.4-1.8-7.4-8.1c0-1.8,0.6-3.2,1.7-4.4
	c-0.2-0.4-0.7-2.1,0.2-4.3c0,0,1.4-0.4,4.5,1.7c1.3-0.4,2.7-0.5,4.1-0.5c1.4,0,2.8,0.2,4.1,0.5c3.1-2.1,4.5-1.7,4.5-1.7
	c0.9,2.2,0.3,3.9,0.2,4.3c1,1.1,1.7,2.6,1.7,4.4c0,6.3-3.8,7.6-7.4,8c0.6,0.5,1.1,1.5,1.1,3c0,2.2,0,3.9,0,4.5
	c0,0.4,0.3,0.9,1.1,0.8c6.5-2.2,11.1-8.3,11.1-15.5C34.3,8.7,27,1.4,18,1.4z"/>
</svg>

'''
'''--- vue-frontend/src/assets/js/api.js ---
/**
 * axioså°è£…
 * è¯·æ±‚æ‹¦æˆªã€å“åº”æ‹¦æˆªã€é”™è¯¯ç»Ÿä¸€å¤„ç†
 */
import axios from 'axios';
import router from '../../router';
import vue from '../../main'

export async function getAxiosInstance() {
  var baseURL, instance

  baseURL = 'http://couy.xyz:3001/';

  /** 
   * è¯·æ±‚å¤±è´¥åçš„é”™è¯¯ç»Ÿä¸€å¤„ç† 
   * @param {Number} status è¯·æ±‚å¤±è´¥çš„çŠ¶æ€ç 
   */
  const errorHandle = (status, response) => {
    // çŠ¶æ€ç åˆ¤æ–­
    switch (status) {
      // 401: æœªç™»å½•çŠ¶æ€ï¼Œè·³è½¬ç™»å½•é¡µ
      case 401:
        vue.$store.commit("set_sys_info", {
          msg: `
          ğŸ˜­${response.data.msg|| 'æœåŠ¡å™¨æœ‰ç‚¹é—®é¢˜ï¼Œè¯·ç¨åé‡è¯•'}
          `,
          type: 'warning'
        });
        break;
      case 403:
        vue.$store.commit("set_sys_info", {
          msg: `
          ğŸ˜­${response.data.msg|| 'æœåŠ¡å™¨æœ‰ç‚¹é—®é¢˜ï¼Œè¯·ç¨åé‡è¯•'}
          `,
          type: 'warning'
        });
        break;
      case 404:
        vue.$store.commit("set_sys_info", {
          msg: `
          ğŸ˜­${response.data.msg|| 'æœåŠ¡å™¨æœ‰ç‚¹é—®é¢˜ï¼Œè¯·ç¨åé‡è¯•'}
          `,
          type: 'warning'
        });
        break;
      default:
        vue.$store.commit("set_sys_info", {
          msg: `
          ğŸ˜­${response.data.msg|| 'æœåŠ¡å™¨æœ‰ç‚¹é—®é¢˜ï¼Œè¯·ç¨åé‡è¯•'}
          `,
          type: 'warning'
        });
    }
  }

  // åˆ›å»ºaxioså®ä¾‹ 
  instance = axios.create({
    timeout: 1000 * 12 // è®¾ç½®åäºŒç§’é’Ÿçš„è¯·æ±‚è¶…æ—¶é™åˆ¶
    // transformRequest: data => qs.stringify(data)
  });
  if (process.env.NODE_ENV == 'development') {
    //å¼€å‘ç¯å¢ƒ
    instance.defaults.baseURL = baseURL;
  } else if (process.env.NODE_ENV == 'debug') {
    //debug
    instance.defaults.baseURL = baseURL;
  } else if (process.env.NODE_ENV == 'production') {
    //ç”Ÿäº§ç¯å¢ƒ
    instance.defaults.baseURL = baseURL;
  }
  // è®¾ç½®postè¯·æ±‚å¤´
  instance.defaults.headers.post['Content-Type'] = 'application/json;charset=UTF-8';

  // å“åº”æ‹¦æˆªå™¨
  instance.interceptors.response.use(
    // è¯·æ±‚æˆåŠŸ
    res => res.status === 200 ? Promise.resolve(res) : Promise.reject(res),
    // è¯·æ±‚å¤±è´¥
    error => {
      const {
        response
      } = error;
      if (response) {
        // è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´ 
        errorHandle(response.status, response);

        return Promise.reject(response);
      } else {
        vue.$store.commit("set_sys_info", {
          msg: `
          ğŸ˜­${response.data.msg|| 'æœåŠ¡å™¨æœ‰ç‚¹é—®é¢˜ï¼Œè¯·ç¨åé‡è¯•'}
          `,
          type: 'warning'
        });
      }
    });

  return instance
}
'''
'''--- vue-frontend/src/assets/js/assist.js ---
/**
 * vueç»„ä»¶é€šä¿¡
 * @author couy
 * @param context å½“å‰ä¸Šä¸‹æ–‡ç¯å¢ƒï¼ˆä¸€èˆ¬ä¼ thisï¼‰
 * @param componentName  éœ€è¦æŸ¥æ‰¾çš„ç»„ä»¶çš„ç»„ä»¶åï¼ˆç‰¹åˆ«æ³¨æ„éœ€è¦è¯¥ç»„ä»¶å®šä¹‰äº†nameå±æ€§ï¼‰
 */

export const assist = {
  methods: {
    // ç”±ä¸€ä¸ªç»„ä»¶ï¼Œå‘ä¸Šæ‰¾åˆ°æœ€è¿‘çš„æŒ‡å®šç»„ä»¶
    findComponentUpward(context, componentName) {
      let parent = context.$parent;
      let name = parent.$options.name;

      while (parent && (!name || [componentName].indexOf(name) < 0)) {
        parent = parent.$parent;
        if (parent) name = parent.$options.name;
      }
      return parent;
    },
    // ç”±ä¸€ä¸ªç»„ä»¶ï¼Œå‘ä¸Šæ‰¾åˆ°æ‰€æœ‰çš„æŒ‡å®šç»„ä»¶
    findComponentsUpward(context, componentName) {
      let parents = [];
      const parent = context.$parent;

      if (parent) {
        if (parent.$options.name === componentName) parents.push(parent);
        return parents.concat(this.findComponentsUpward(parent, componentName));
      } else {
        return [];
      }
    },
    // ç”±ä¸€ä¸ªç»„ä»¶ï¼Œå‘ä¸‹æ‰¾åˆ°æœ€è¿‘çš„æŒ‡å®šç»„ä»¶
    findComponentDownward(context, componentName) {
      const childrens = context.$children;
      let children = null;

      if (childrens.length) {
        for (const child of childrens) {
          const name = child.$options.name;

          if (name === componentName) {
            children = child;
            break;
          } else {
            children = this.findComponentDownward(child, componentName);
            if (children) break;
          }
        }
      }
      return children;
    },
    // ç”±ä¸€ä¸ªç»„ä»¶ï¼Œå‘ä¸‹æ‰¾åˆ°æ‰€æœ‰æŒ‡å®šçš„ç»„ä»¶
    findComponentsDownward(context, componentName) {
      return context.$children.reduce((components, child) => {
        if (child.$options.name === componentName) components.push(child);
        const foundChilds = this.findComponentsDownward(child, componentName);
        return components.concat(foundChilds);
      }, []);
    },

    // ç”±ä¸€ä¸ªç»„ä»¶ï¼Œæ‰¾åˆ°æŒ‡å®šç»„ä»¶çš„å…„å¼Ÿç»„ä»¶
    findBrothersComponents(context, componentName, exceptMe = true) {
      let res = context.$parent.$children.filter(item => {
        return item.$options.name === componentName;
      });
      let index = res.findIndex(item => item._uid === context._uid);
      if (exceptMe) res.splice(index, 1);
      return res;
    }
  }
};
'''
'''--- vue-frontend/src/assets/js/handle.js ---
function deepCopy(data) {
  return JSON.parse(JSON.stringify(data))
}

/**
 * æ ¹æ®å¼ºåŒ–ç­‰çº§è®¡ç®—å¼ºåŒ–åå±æ€§
 * @param {obj} entry è£…å¤‡åŸºç¡€å±æ€§
 * @param {number} lv  è£…å¤‡å¼ºåŒ–ç­‰çº§
 */
function CalculateStrAttr(entry, lv) {
  var a = 1
  // ç¡®å®šå¼ºåŒ–ç³»æ•°
  a = (1.055 ** lv ** 1.1)
  entry.map((item) => {
    let value
    switch (item.type) {
      case 'ATK':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value
        break;
      case 'DEF':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value
        break;
      case 'HP':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value
        break;
      case 'ATKPERCENT':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value + '%'
        break;
      case 'DEFPERCENT':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value + '%'
        break;
      case 'HPPERCENT':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value + '%'
        break;
      case 'CRIT':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value + '%'
        break;
      case 'CRITDMG':
        value = Math.round(a * item.value)
        item.value = value
        item.showValue = '+' + value + '%'
        break;
      case 'BLOC':
          value = Math.round(a * item.value)
          item.value = value
          item.showValue = '+' + value
          break;
      default:
        break;
    }

  })
  return entry
}

/**
 * éšæœºåŒ–ç”Ÿæˆå‰¯æœ¬
 * @param {number} lv  å‰¯æœ¬ç­‰çº§
 * @param {number} difficulty(1:æ™®é€š 2:å›°éš¾ 3:æéš¾) å‰¯æœ¬éš¾åº¦
 */
function createRandomDungeons(lv, difficulty) {
  lv = lv||1,difficulty = difficulty||1;
  var df = difficulty==1?1:difficulty==2?1.15:1.4
  var dungeonsConfig = {
    id:lv+''+difficulty,
    battleTime: 2000,
    name: 'Lv'+lv+'_'+(difficulty==1?'æ™®é€š':difficulty==2?'å›°éš¾':'æéš¾'),
    eventNum: '5',
    lv: lv,
    needDPS: parseInt(lv*lv**1.3*2*difficulty),
    difficulty:difficulty,
    difficultyName:difficulty==1?'æ™®é€š':difficulty==2?'å›°éš¾':'æéš¾',
    top:Math.random()*70+15+'%',
    left:Math.random()*70+10+'%',
    eventType: [{
      name: 'monster',
      type: 'monster',
      eventType: 'battle',
      attribute: {
        HP: parseInt(lv*lv**1.1*(Math.random()*5+16)*df),
        ATK: parseInt(lv*lv**1.1*(Math.random()*1+2)*df),
      },
      trophy: {
        gold: parseInt(lv**1.16*(Math.random()*5+11)*df),
        equip: [
          0.2*df, 0.08*df, 0.03*df, 0*df
        ],
      }
    }, {
      name: 'monster',
      type: 'monster',
      eventType: 'battle',
      attribute: {
        HP: parseInt(lv*lv**1.1*(Math.random()*5+16)*df),
        ATK: parseInt(lv*lv**1.1*(Math.random()*1+2)*df),
      },
      trophy: {
        gold: parseInt(lv**1.16*(Math.random()*5+11)*df),
        equip: [
          0.2*df, 0.08*df, 0.03*df, 0*df
        ],
      }
    }, {
      name: 'monster',
      type: 'monster',
      eventType: 'battle',
      attribute: {
        HP: parseInt(lv*lv**1.1*(Math.random()*5+16)*df),
        ATK: parseInt(lv*lv**1.1*(Math.random()*1+2)*df),
      },
      trophy: {
        gold: parseInt(lv**1.16*(Math.random()*5+11)*df),
        equip: [
          0.2*df, 0.08*df, 0.03*df, 0*df
        ],
      }
    }, {
      name: 'monster',
      type: 'monster',
      eventType: 'battle',
      attribute: {
        HP: parseInt(lv*lv**1.1*(Math.random()*5+16)*df),
        ATK: parseInt(lv*lv**1.1*(Math.random()*1+2)*df),
      },
      trophy: {
        gold: parseInt(lv**1.16*(Math.random()*5+11)*df),
        equip: [
          0.2*df, 0.08*df, 0.03*df, 0*df
        ],
      }
    }, {
      name: 'boss',
      type: 'boss',
      eventType: 'battle',
      attribute: {
        HP: parseInt(lv*lv**1.1*(Math.random()*5+30)*df),
        ATK: parseInt(lv*lv**1.1*(Math.random()*1+3)*df),
      },
      trophy: {
        gold: parseInt(lv**1.16*(Math.random()*10+28)*df),
        equip: [
          0.25-0.05*df, 0.55-0.15*df, 0.15+0.15*df, 0.05+0.05*df
        ],
      }
    }, ]
  }
  return dungeonsConfig
}

/**
 *  è¿”å›ä¸€æ¡éšæœºå±æ€§
 * @param {number} lv  è£…å¤‡å¼ºåŒ–ç­‰çº§
 */
function createRandomEntry(lv, qualityCoefficient) {

  let extraEntry = [{
      'value': '11',
      'showVal': '+11',
      type: 'ATK',
      'name': 'æ”»å‡»åŠ›'
    }, {
      type: 'CRIT',
      'value': '8',
      'showVal': '+8%',
      'name': 'æš´å‡»ç‡'
    }, {
      type: 'CRITDMG',
      'value': '20',
      'showVal': '+20%',
      'name': 'æš´å‡»ä¼¤å®³'
    }, {
      type: 'HP',
      'value': '20',
      'showVal': '+20',
      'name': 'ç”Ÿå‘½å€¼'
    }, {
      type: 'DEF',
      'value': '8',
      'showVal': '+8%',
      'name': 'é˜²å¾¡åŠ›'
    }, {
      'value': '11%',
      'showVal': '+11%',
      type: 'ATKPERCENT',
      'name': 'æ”»å‡»åŠ›'
    }, {
      'value': '11%',
      'showVal': '+11%',
      type: 'DEFPERCENT',
      'name': 'é˜²å¾¡åŠ›'
    }, {
      'value': '11%',
      'showVal': '+11%',
      type: 'HPPERCENT',
      'name': 'ç”Ÿå‘½å€¼'
    },
    {
      'value': '11%',
      'showVal': '+11%',
      type: 'BLOCPERCENT',
      'name': 'æ ¼æŒ¡'
    },
    {
      'value': '11%',
      'showVal': '+11%',
      type: 'BLOC',
      'name': 'æ ¼æŒ¡'
    },
    // {
    //   'value': '11%',
    //   'showVal': '+11%',
    //   type: 'EVA',
    //   'name': 'é—ªé¿'
    // },
  ]

  let randomCoefficient = Math.random() ,EntryLevel = Math.floor(randomCoefficient*100)+'%'
  let entry = {}
  let index = Math.floor((Math.random()  * extraEntry.length));
  entry = extraEntry[index]
  entry.EntryLevel = EntryLevel
  switch (entry.type) {
    case 'ATK':
      var random = parseInt(lv * 1 + (randomCoefficient  * lv / 2 + 1))
      random = parseInt(random * qualityCoefficient)
      random = random || 1
      entry.value = random
      entry.showVal = '+' + random
      break;
    case 'DEF':
      var random = parseInt((lv * 0.4 + (randomCoefficient  * lv / 2 + 1)))
      random = parseInt(random * qualityCoefficient)
      random = random || 1
      entry.value = random
      entry.showVal = '+' + random
      break;
    case 'HP':
      var random = parseInt((lv * 0.2 * 15 + (randomCoefficient  * lv / 2 + 1)))
      random = parseInt(random * qualityCoefficient)
      random = random || 1
      entry.value = random
      entry.showVal = '+' + random
      break;
    case 'ATKPERCENT':
      var random = parseFloat(lv * 0.11 + (randomCoefficient  * lv / 10 + 4)).toFixed(2)
      random = parseFloat(random * qualityCoefficient).toFixed(2)
      random = random || 1
      entry.value = random
      entry.showVal = '+' + random + '%'
      break;
    case 'DEFPERCENT':
      var random = parseFloat(lv * 0.1 + (randomCoefficient  * lv / 10 + 4)).toFixed(2)
      random = parseFloat(random * qualityCoefficient).toFixed(2)
      random = random || 1
      entry.value = random
      entry.showVal = '+' + random + '%'
      break;
    case 'HPPERCENT':
      var random = parseFloat(lv * 0.13 + (randomCoefficient  * lv / 10 + 4)).toFixed(2)
      random = parseFloat(random * qualityCoefficient).toFixed(2)
      random = random || 1
      entry.value = random
      entry.showVal = '+' + random + '%'
      break;
    case 'BLOCPERCENT':
        var random = parseFloat(lv * 0.1 + (randomCoefficient  * lv / 10 + 4)).toFixed(2)
        random = parseFloat(random * qualityCoefficient).toFixed(2)
        random = random || 1
        entry.value = random
        entry.showVal = '+' + random + '%'
        break;
    case 'CRIT':
      var random = parseInt(randomCoefficient  * 5 + 5)
      random = parseInt(random * qualityCoefficient)
      entry.value = random
      entry.showVal = '+' + random + '%'
      break;
    case 'CRITDMG':
      var random = parseInt(randomCoefficient  * 12 + 20)
      random = parseInt(random * qualityCoefficient)
      entry.value = random
      entry.showVal = '+' + random + '%'
      break;
    case 'BLOC':
      var random = parseInt((lv * 0.6 + (randomCoefficient  * lv / 2 + 1)))
      random = parseInt(random * qualityCoefficient)
      random = random || 1
      entry.value = random
      entry.showVal = '+' + random
      break;
      // case 'EVA':
      //     var random = parseInt(randomCoefficient  * 12 + 3)
      //     random = parseInt(random * qualityCoefficient)
      //     entry.value = random
      //     entry.showVal = '+' + random + '%'
      //     break;
    default:
      break;
  }
  return entry
}

export default {
  deepCopy,
  CalculateStrAttr,
  createRandomEntry,
  createRandomDungeons
}
'''
'''--- vue-frontend/src/main.js ---
import Vue from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'
import '@/assets/css/base.scss'

import {
  getAxiosInstance
} from '@/assets/js/api' // å¯¼å…¥apiæ¥å£
getAxiosInstance().then(v => {
  Vue.prototype.$api = v
}).catch(e => {
  console.log(e)
});

const vue = new Vue({
  router,
  store,
  render: h => h(App)
}).$mount('#app')

import Message from './views/uiComponent/message/index'
Vue.prototype.$message = Message

Vue.prototype.$deepCopy = function(data){
  data = JSON.stringify(data).length>1?data:{}
  return JSON.parse(JSON.stringify(data))
}

export default vue;
'''
'''--- vue-frontend/src/router.js ---
import Vue from 'vue'
import Router from 'vue-router'

Vue.use(Router)

export default new Router({
  mode: 'hash',
  base: process.env.BASE_URL,
  routes: [{
      path: '/',
      name: 'index',
      component: () => import('./views/index.vue')
    }
  ]
})

/**
 * é‡å†™è·¯ç”±çš„pushæ–¹æ³•
 */
const routerPush = Router.prototype.push
Router.prototype.push = function push(location) {
  return routerPush.call(this, location).catch(error=> error)
}
'''
'''--- vue-frontend/src/store.js ---
import Vue from 'vue'
import Vuex from 'vuex'
import vueInstance from './main'
import handle from './assets/js/handle'
Vue.use(Vuex)

var initial_weapon = {
    "lv": 1,
    itemType: 'weapon',
    "quality": {
      name: 'ç ´æ—§',
      qualityCoefficient: 0.7,
      probability: '0.25',
      color: '#a1a1a1',
      extraEntryNum: 1,
    },
    "type": {
      "name": "æ–°æ‰‹çŸ­å‰‘",
      "des": "æ–°æ‰‹èœé¸¡ä½¿ç”¨çš„çŸ­å‰‘",
      "iconSrc": "./icons/W_Sword001.png",
      "entry": [{
        "valCoefficient": 0.9,
        "value": 1,
        "showVal": "+1",
        "type": "ATK",
        "name": "æ”»å‡»åŠ›"
      }]
    },
    "extraEntry": [{
      "value": 1,
      "showVal": "+1",
      "type": "ATK",
      "name": "æ”»å‡»åŠ›"
    }]
  },
  initial_armor = {
    "lv": 1,
    itemType: 'armor',
    "quality": {
      name: 'ç ´æ—§',
      qualityCoefficient: 0.7,
      probability: '0.25',
      color: '#a1a1a1',
      extraEntryNum: 1,
    },
    "type": {
      "name": "æ–°æ‰‹å¸ƒè¡£",
      "des": "æ–°æ‰‹èœé¸¡ç©¿çš„æ™®é€šè¡£ç‰©",
      "iconSrc": "./icons/A_A3.png",
      "entry": [{
        "valCoefficient": 0.9,
        "value": 1,
        "showVal": "+1",
        "type": "DEF",
        "name": "é˜²å¾¡åŠ›"
      }]
    },
    "extraEntry": [{
      "type": "HP",
      "value": 10,
      "showVal": "+10",
      "name": "ç”Ÿå‘½å€¼"
    }, ]
  },
  initial_neck = {
    "lv": 1,
    itemType: 'neck',
    "quality": {
      name: 'ç ´æ—§',
      qualityCoefficient: 0.7,
      probability: '0.25',
      color: '#a1a1a1',
      extraEntryNum: 1,
    },
    "type": {
      "name": "æ–°æ‰‹é¡¹å ",
      "des": "ä¸€ä¸ªæ™®é€šçš„æŒ‡ç¯",
      "iconSrc": "./icons/Ac_3.png",
      "entry": [{
        "valCoefficient": 0.9,
        "value": 20,
        "showVal": "+20",
        "type": "HP",
        "name": "ç”Ÿå‘½å€¼"
      }]
    },
    "extraEntry": [{
      "type": "CRIT",
      "value": 10,
      "showVal": "+10%",
      "name": "æš´å‡»ç‡"
    }]
  },
  initial_ring = {
    "lv": 1,
    itemType: 'ring',
    "quality": {
      name: 'ç ´æ—§',
      qualityCoefficient: 0.7,
      probability: '0.25',
      color: '#a1a1a1',
      extraEntryNum: 1,
    },
    "type": {
      "name": "æ–°æ‰‹æŒ‡ç¯",
      "des": "ä¸€ä¸ªæ™®é€šçš„æŒ‡ç¯",
      "iconSrc": "./icons/Ac_10.png",
      "entry": [{
        "valCoefficient": 0.9,
        "value": 20,
        "showVal": "+20",
        "type": "HP",
        "name": "ç”Ÿå‘½å€¼"
      }]
    },
    "extraEntry": [{
      "type": "CRIT",
      "value": 10,
      "showVal": "+10%",
      "name": "æš´å‡»ç‡"
    }]
  };

export default new Vuex.Store({
  state: {
    needStrengthenEquipment: {}, //è®¾å®šå½“å‰éœ€è¦å¼ºåŒ–çš„è£…å¤‡
    sysInfo: [{
      type: '',
      msg: "æ¬¢è¿ä½ å‹‡å£«ï¼Œç‚¹å‡»åœ°å›¾ä¸Šçš„å‰¯æœ¬å¼€å§‹æˆ˜æ–—ã€‚"
    }, {
      type: '',
      msg: "èœå•æ å¯ä»¥åˆ·æ–°å½“å‰ä¸–ç•Œå‰¯æœ¬ã€‚"
    }],
    reincarnationAttribute: {
      'HP': 0,
      'ATK': 0,
      'CRIT': 0,
      'CRITDMG': 0,
      'DEF': 0,
      'BLOC': 0,
      'MOVESPEED': 0,
      'BATTLESPEED': 0,
    },
    reincarnation: {
      count: 0,
      point: 0,
    },
    playerAttribute: {
      lv: 1,
      GOLD: 0,
      healthRecoverySpeed: 1,
      endlessLv: 0,
      attribute: {
        CURHP: {
          value: 0,
          showValue: '',
        },
        MAXHP: {
          value: 0,
          showValue: '',
        },
        ATK: {
          value: 0,
          showValue: '',
        },
        DEF: {
          value: 0,
          showValue: '',
        },
        REDUCDMG: { //æ ¹æ®æŠ¤ç”²è®¡ç®—çš„å‡ä¼¤æ¯”ä¾‹
          value: 0,
          showValue: '',
        },
        CRIT: {
          value: 0,
          showValue: '',
        },
        CRITDMG: {
          value: 0,
          showValue: '',
        },
        BLOC: {
          value: 0,
          showValue: '0',
        },
        EVA: {
          value: 0,
          showValue: '',
        },
      },
      weapon: initial_weapon,
      armor: initial_armor,
      ring: initial_ring,
      neck: initial_neck,
    }
  },
  mutations: {
    set_player_weapon(state, data) {
      this.state.playerAttribute.weapon = data
      vueInstance.$store.commit('set_player_attribute')
    },
    set_player_armor(state, data) {
      this.state.playerAttribute.armor = data
      vueInstance.$store.commit('set_player_attribute')
    },
    set_player_ring(state, data) {
      this.state.playerAttribute.ring = data
      vueInstance.$store.commit('set_player_attribute')
    },
    set_player_neck(state, data) {
      this.state.playerAttribute.neck = data || initial_neck
      vueInstance.$store.commit('set_player_attribute')
    },
    set_player_rein_attribute(state, data) {
      this.state.reincarnationAttribute = data
      vueInstance.$store.commit('set_player_attribute')
    },
    set_player_rein(state, data) {
      this.state.reincarnation = data
    },
    set_player_attribute(state, data) {
      var p = state.playerAttribute
      var warpon = p.weapon,
        armor = p.armor,
        ring = p.ring,
        neck = p.neck,
        entry = [],
        chp = state.playerAttribute.attribute.CURHP.value,
        mhp = state.playerAttribute.attribute.MAXHP.value,
        rA = state.reincarnationAttribute,
        hpP;
      if (chp && mhp) {
        hpP = chp / mhp
      }

      var attribute = {
        CURHP: {
          value: 0,
          showValue: '',
        },
        MAXHP: {
          value: 0 + rA.HP,
          showValue: '',
        },
        ATK: {
          value: 0 + rA.ATK,
          showValue: 0 + rA.ATK,
        },
        DEF: {
          value: 0 + rA.DEF,
          showValue: 0 + rA.DEF,
        },
        CRIT: {
          value: 0 + rA.CRIT,
          showValue: '+' + 0 + rA.CRIT + '%',
        },
        CRITDMG: {
          value: 0 + rA.CRITDMG,
          showValue: '+' + 0 + rA.CRITDMG + '%',
        },
        EVA: {
          value: 0,
          showValue: '',
        },
        BLOC: {
          value: 0 + rA.BLOC,
          showValue: 0 + rA.BLOC,
        },
      }

      let warponStrEntry = vueInstance.$deepCopy(warpon.type.entry)
      let armorStrEntry = vueInstance.$deepCopy(armor.type.entry)
      let ringStrEntry = vueInstance.$deepCopy(ring.type.entry)
      let neckStrEntry = vueInstance.$deepCopy(neck.type.entry)
      handle.CalculateStrAttr(warponStrEntry, warpon.enchantlvl || 0)
      handle.CalculateStrAttr(armorStrEntry, armor.enchantlvl || 0)
      handle.CalculateStrAttr(ringStrEntry, ring.enchantlvl || 0)
      handle.CalculateStrAttr(neckStrEntry, neck.enchantlvl || 0)

      entry = [].concat(warponStrEntry).concat(warpon.extraEntry).concat(armorStrEntry).concat(armor.extraEntry).concat(ringStrEntry).concat(ring.extraEntry).concat(neckStrEntry).concat(neck.extraEntry)

      // å‘½ä¸­å‡ ç‡åˆå§‹ä¸º100%ï¼Œç”¨æ¥è®¡ç®—æœ€ç»ˆçš„é—ªé¿å‡ ç‡
      let HitChance = 1
      entry.map(item => {
        switch (item.type) {
          case 'ATK':
            attribute.ATK.value += Number(item.value)
            attribute.ATK.showValue = '+' + (attribute.ATK.value)
            break;
          case 'DEF':
            attribute.DEF.value += Number(item.value)
            attribute.DEF.showValue = '+' + (attribute.DEF.value)
            break;
          case 'HP':
            attribute.MAXHP.value += Number(item.value)
            attribute.MAXHP.showValue = '+' + (attribute.MAXHP.value)
            break;
          case 'CRIT':
            attribute.CRIT.value += Number(item.value)
            attribute.CRIT.showValue = '+' + attribute.CRIT.value + '%'
            break;
          case 'CRITDMG':
            attribute.CRITDMG.value += Number(item.value)
            attribute.CRITDMG.showValue = '+' + attribute.CRITDMG.value + '%'
            break;
          case 'EVA':
            HitChance = HitChance * (1 - item.value / 100)
            break;
          case 'BLOC':
            attribute.BLOC.value += Number(item.value)
            attribute.BLOC.showValue = (attribute.BLOC.value)
            break;
          default:
            break;
        }
      })
      var ATKPERCENT = 0,
        DEFPERCENT = 0,
        HPPERCENT = 0,
      BLOCPERCENT = 0
      entry.map(item => {
        switch (item.type) {
          case 'ATKPERCENT':
            ATKPERCENT += Number(item.value)
            break;
          case 'DEFPERCENT':
            DEFPERCENT += Number(item.value)
            break;
          case 'HPPERCENT':
            HPPERCENT += Number(item.value)
            break;
          case 'BLOCPERCENT':
            BLOCPERCENT += Number(item.value)
            break;
          default:
            break;
        }
      })
      attribute.ATK.value = parseInt(attribute.ATK.value * (100 + ATKPERCENT) / 100)
      attribute.ATK.showValue = '+' + (attribute.ATK.value)
      attribute.DEF.value = parseInt(attribute.DEF.value * (100 + DEFPERCENT) / 100)
      attribute.DEF.showValue = '+' + (attribute.DEF.value)
      attribute.MAXHP.value = parseInt(attribute.MAXHP.value * (100 + HPPERCENT) / 100)
      attribute.MAXHP.showValue = '+' + (attribute.MAXHP.value)
      attribute.BLOC.value = parseInt(attribute.BLOC.value * (100 + BLOCPERCENT) / 100)
      attribute.BLOC.showValue = '+' + (attribute.BLOC.value)
      attribute.EVA.value = ((1 - HitChance) * 100).toFixed(1)
      attribute.EVA.showValue = ((1 - HitChance) * 100).toFixed(1) + '%'

      // console.log(vueInstance.$store.state)
      attribute.MAXHP.value += 200
      if (hpP) {

        attribute.CURHP.value = parseInt(attribute.MAXHP.value * hpP)
        attribute.CURHP.showValue = '+' + (attribute.CURHP.value)
      } else {
        attribute.CURHP = vueInstance.$deepCopy(attribute.MAXHP)
      }

      // åˆå§‹æš´å‡»ä¼¤å®³150%
      attribute.CRITDMG.value += 150

      var atk = attribute.ATK.value,
        crit = attribute.CRIT.value,
        critdmg = attribute.CRITDMG.value
      // æš´å‡»ç‡æœ€å¤š100%
      if (crit > 100) {
        crit = 100
      }
      attribute.DPS = parseFloat((1 - crit / 100) * atk * 1 + crit / 100 * (critdmg) / 100 * atk * 1)
      var armor = attribute.DEF.value

      //æ‰¿å—ä¼¤å®³æ¯”ä¾‹
      // attribute.REDUCDMG = 1 - 0.06 * armor / (1 + (0.06 * armor))
      attribute.REDUCDMG = 1 - 0.05 * armor / (1 + (0.0525 * armor))

      // state.playerAttribute.attribute=attribute
      // vueInstance.$store.commit("set_player_attribute", attribute);
      this.state.playerAttribute.attribute = attribute
    },
    set_sys_info(state, data) {
      this.state.sysInfo.push(data);
      var time = +new Date()
      var date = new Date(time + 8 * 3600 * 1000); // å¢åŠ 8å°æ—¶
      this.state.sysInfo[this.state.sysInfo.length - 1].time = date.toJSON().substr(11, 8).replace('T', ' ')
      if (this.state.sysInfo.length > 50) {
        this.state.sysInfo.shift()
      }
    },
    clear_sys_info(state, data) {
      this.state.sysInfo.splice(1, this.state.sysInfo.length)
    },
    set_player_gold(state, data) {
      this.state.playerAttribute.GOLD += parseInt(data);
    },
    reset_player_gold(state, data) {
      this.state.playerAttribute.GOLD = parseInt(data);
    },
    reset_player_equi() {
      vueInstance.$store.commit('set_player_weapon', initial_weapon)
      vueInstance.$store.commit('set_player_armor', initial_armor)
      vueInstance.$store.commit('set_player_ring', initial_ring)
      vueInstance.$store.commit('set_player_neck', initial_neck)
      vueInstance.$store.commit('set_player_lv', 1)
    },
    set_endless_lv(state, data) {
      this.state.playerAttribute.endlessLv = parseInt(data) < 1 ? 1 : parseInt(data);
    },
    set_player_lv(state, data) {
      data = data < 1 ? 1 : data
      this.state.playerAttribute.lv = parseInt(data || 1);
    },
    set_operator_schema(state, data) {
      this.state.operatorSchemaIsMobile = data;
    },
    set_need_strengthen_equipment(state, data) {
      this.state.needStrengthenEquipment = data;
    },
    set_player_curhp(state, data) {
      var CURHP = this.state.playerAttribute.attribute.CURHP,
        MAXHP = this.state.playerAttribute.attribute.MAXHP
      if (data == 'dead') {
        CURHP.value = 1
      }else if(data == 'full'){
        CURHP.value = MAXHP.value
      }
       else {
        CURHP.value += Number(data);
        CURHP.value = parseInt(CURHP.value)
        if (CURHP.value > MAXHP.value) {
          CURHP.value = MAXHP.value
        }
      }

    }
  },
})
'''
'''--- vue-frontend/src/views/index.html ---
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  @font-face {
    font-family: 'sarasa';
    src:
      url('../assets/fonts/sarasa-ui-cl-regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
  }

  @font-face {
    font-family: 'JetBrainsMono';
    src:
      url('../assets/fonts/JetBrainsMono-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
  }

  #app {
    font-family: 'sarasa' !important;
  }

  div,
  button,
  span,
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  b,
  input {
    font-family: 'sarasa' !important;
  }
  i{
    font-family:'JetBrainsMono' !important;
  }
</style>

<body>
  å­—è››å­—ä½“æ–‡ä»¶ï¼Œä½¿ç”¨:åœ¨æœ¬ç›®å½•ä¸‹æ‰§è¡Œï¼šfont-spider ./index.htmlï¼Œå…·ä½“å‚ç…§å­—è››å®˜ç½‘
  ä¸­æ–‡å­—ä½“æ–‡ä»¶è¿‡å¤§ï¼Œæ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰ä¸Šä¼ æºæ–‡ä»¶ï¼Œä»…ä»…ä¸Šä¼ äº†å¤„ç†åçš„ï¼Œéœ€è¦æºæ–‡ä»¶çš„å¯ä»¥è”ç³»æˆ‘
  <div>
    å°Šæ•¬èƒŒåŒ…è£…å¤‡å•†åº—å¼ºåŒ–è£…å¤‡å¯¼å‡ºå­˜æ¡£å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿æ‰‹æœºç”¨æˆ·é•¿æŒ‰æ²¡æœ‰ç²˜è´´è¯·å°è¯•ä½¿ç”¨è¾“æ³•å‰ªè´´æ¿åŠŸèƒ½å¯¼æ¸…å…ˆè¾“å­˜æ¡£æ•°æ®å·²ç»å¤åˆ¶å­˜æ¡£äº†å»ºè®®åˆ°å¤‡å¿˜å½•æ¸…å…ˆè¾“å­˜æ¡£æ•°æ®å­˜æ¡£æˆåŠŸå¯¼äº†ç³Ÿç³•å­˜æ¡£åäº†æ¸¸æˆè¿›åº¦å·²ç»äº†å½“å‰æœ€æ¯ç§’ä¼šå›å¤çš„æœ€åŠ›ä»¥åŠè®¡ç®—åçš„å‡ä¼¤æ¯”ä¾‹å‡ä¼¤æ¯”ä¾‹é‡‡ç”¨éçº¿æ€§è®¡ç®—æŠ¤ç”²è¶Šé«˜æ”¶ç›Šè¶Šä½æ˜¾ç¤ºä¸ºè¿‘ä¼¼å€¼å®é™…ä¸Šæ°¸è¿œä¸ä¼šåˆ°è¾¾å‡ä¼¤å½“å‰çš„åˆå§‹ä¸ºæ¯ç§’è¿™ä¸ªåªæ˜¯æ•°æ®å¹¶æ²¡æœ‰ç»Ÿè®¡å±æ€§æ‰€ä»¥åªæ˜¯ä½œä¸ºæˆ˜æ–—åŠ›è¯„ä¼°çš„ä¸€ä¸ªä¾æ®ä½ æ‹¥æœ‰çš„é‡‘å¸æ•°é‡åœ¨è¿™é‡Œé’±å°±æ˜¯ä¸‡èƒ½çš„ç¨€æœ‰æ‰è½ï¼šç‹¬ç‰¹çœŸÂ·æ­»ç¥åç‰‡æŒ‡å…ˆé©±è€…æŒ‡ç´ ç›å‘œå°Šçš„æ„å¿—æœˆå¤œè§å°Šçš„æ„å¿—æ®è¯´æ‹¥æœ‰å¢å¼ºä½©æˆ´è€…ä½“è´¨çš„ç¥ç§˜åŠŸæ•ˆå–µå–µæŒ‡ä¸Šé¢æœ‰æ²¡æœ‰æ‘¸åˆ°çš„æ€¨å¿µå¾¡é­‚ä¹‹å‡ºæ¥å§å¡èµå¸çº³æ‰€æœ‰å½·å¾¨çš„çµé­‚â€”â€”é¬¼å£«çº¦ç¿°åå­—å†›é¡¹é“¾åå­—å†›ä½©æˆ´çš„é¡¹é“¾åŠ›å†°é¾™å‡é›ªå†°é¾™å‡é›ªé“¶é­‚ä¹‹çœ¼é“¶é­‚ä¹‹çœ¼åŠ›çº¢æœˆçš„å¤œè¡Œè¡£åŠ›è‚ƒæ¸…è€…æˆè¡£ç›¸ä¼ çœ‹åˆ°è¿™ä¸€è¢­é»‘è¡£çš„äººéƒ½æ­»äº†äº‰æ‰§è¿èº«è¡£åŠ›è±ªç›”ç”²åŠ›éšæ­¦å£«é“ ç”²åŠ›èŠ¬æ’’é‡Œå°”è¿½è¸ªè€…åŠ›ç´«é‡‘å®ˆæŠ¤èƒ¸ç”²å¤Ÿè‚‰æ‰èƒ½è¾“å‡ºåŠ›æˆ˜å£«é‡é“ å…­çº§æˆ˜å£«ä½¿ç”¨çš„é‡å‹é“ ç”²åŠ›å¤©æƒè½»ç”²èˆå¼ƒäº†æ€§èƒ½çš„è½»ç”²å› ä¸ºæ›´åŠ è½»ä¾¿æ”»æ€§èƒ½æ›´åŠ çªå‡ºåŠ›èµ¤æŸ³è¡€é“ ä¼¼ä¹ä¼šç»™ä½¿ç”¨è€…æä¾›æ°”æ¯åŠ›å“ˆçš®è¿èº«è¡£å“ˆçš®åŠ›åˆ›ä¸–äº¡å‘½åªæœ‰è¢«é€‰ä¸­çš„å‹‡å£«æ‰èƒ½å”¤é†’å®ƒçœŸæ­£çš„åŠ›é‡æ— åæ²¡æœ‰äººçŸ¥é“å®ƒçš„æ¥å†æ­»äº¡ä¹‹ä¸‡ç‰©ç”Ÿè‡ªå®ˆæ’æºåŠ›ç ´åˆ™å¤±éœœé¾™åˆ©å‚²é›ªå†·å¿ƒç»ä¸‡å¿µåŒ–å†°åé˜¿åŠ é›·æ–¯è¡€è‰²å·¨è¯šæ—¢å‹‡å…®åˆä»¥æ­¦ç»ˆåˆšå¼ºå…®ä¸å¯å‡Œèº«æ—¢æ­»å…®ç¥ä»¥çµå­é­‚é­„å…®ä¸ºé¬¼é›„ç¥é¾™çº³æ ¼æ—ä¹‹ç¥é¾™çº³æ ¼æ—çš„çˆªå­é”»é€ çš„åˆ©å¸ˆå†’é™©å®¶ä¹‹å¸ˆå†’é™©å®¶ä¹‹å…­å¤©ä½¿æ­¦å…­å¤©ä½¿æ­¦åŠ›æ•°ç ä¸¸æ’æ¬¡å…·ä½“æƒ…å†µä¸æ˜ä¼ è¯´ä¸ºæ—¥è²ä¸Šäººæ‰€æœ‰ç‹±å²©çŸ³å¤ªç”¨ç‹±å²©çŸ³åˆ¶ä½œçš„å¤ªæ®è¯´æ‹¥æœ‰è®©ä½¿ç”¨è€…æ½œåŠ›çˆ†å‘çš„ç¥ç§˜åŠ›é‡æˆ˜å£«é•¿å…­çº§æˆ˜å£«ä½¿ç”¨çš„é•¿åŠ›èµ¤æŸ³è¡€ä¼¼ä¹ä¼šç»™ä½¿ç”¨è€…æä¾›æ°”æ¯æ™®é€šé•¿æœ´å®æ— åæ™®é€šé•¿æœ‰çš„åªæœ‰å¼ºåŠ›çš„ç´«ç‚æ³¢ä¼ è¯´ä¸­çš„ç‹‚æˆ˜å£«æœ€å–œçˆ±çš„çš„çˆªå­è¿™è¿™ä¹Ÿæ˜¯æ­¦å™¨å†°æ™¶ä¹‹é”‹è¦†ç›–ç€å†°æ™¶ç¢°åˆ°çš„æ•Œäººéƒ½ä¼šè¢«å†»ä½æ ¼æŒ¡è½¬ç”Ÿå…ˆä»£ç‹‚é¾™æˆ˜å£«ç›”ç”²åŸƒè‹è±å¸ƒæ–¯å†›èœå•æ å¯ä»¥åˆ·æ–°å½“å‰ä¸–ç•Œæ¬¢è¿ä½ å‹‡å£«ç‚¹åœ°å›¾ä¸Šçš„å¼€å§‹æˆ˜æ–—æ™®é€šå›°éš¾è®°æç©å®¶ç­‰çº§ç°åœ¨è½¬ç”Ÿå¯ä»¥è·å¾—è½¬ç”Ÿåä¼šå¤±å»é‡‘å¸ä¸è£…å¤‡è½¬ç”Ÿä¼šè·å¾—è½¬ç”Ÿç‚¹æ•°è½¬ç”Ÿç‚¹æ•°æš´æ”»åŠ›é˜²å¾¡åˆƒæ¯›æ¯›åˆ€ç¿¼è§’è‰²å€¼å¤§ä¼¤å®³ä¿å­˜å‰¯æœ¬æŒ‡ç¯ç”Ÿå‘½å‰‘å…¥æˆ’å‡»ç‡æµ‹è¯•æœå†å²ç‰ˆæœ¬
  </div>
  <i>ï¼Œã€‚,.ï¼ï¼Ÿã€ã€ã€‘@#ï¿¥%â€¦â€¦&*ï¼ˆï¼‰â€”â€”+{}|\ã€Šã€‹ï¼Œ/;:''""ï¼›â€˜â€™â€â€œï¼šã€Â·~1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM</i>
</body>

</html>
'''
'''--- vue-frontend/src/views/uiComponent/message/index.js ---
import Vue from 'vue'
import MessageComponent from './message.vue'

let seed = 1  // é€šè¿‡seed++æ¥ç»™æ¯ä¸ªå®ä¾‹åˆ›å»ºä¸åŒid
let instances = []  // ç”¨äºå­˜æ”¾æ‰€æœ‰ç»„ä»¶å®ä¾‹
let MessageConstructor = Vue.extend(MessageComponent)

let Message = (options = {}) => {
  // å½“è°ƒç”¨ç›´æ¥ä¼ å…¥å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œthis.$message('å†…å®¹')
  if (typeof options === 'string') {
    options = {
      message: options
    }
  }

  let id = 'message_' + seed++
  let userOnClose = options.onClose
  let userOnCancle = options.onCancle
  
  // ç»„ä»¶å…³é—­çš„æ—¶å€™æ‰§è¡Œcloseæ–¹æ³•
  // ä¸»è¦ç”¨æ¥æ•°ç»„ä¸­ç§»å‡ºå®ä¾‹ï¼Œå¹¶é‡æ–°è®¡ç®—åç§»é‡
  options.onClose = function () {
    Message.close(id, userOnClose)
  }
  options.onCancle = function () {
    Message.cancle(id, userOnCancle)
  }
  // è®¡ç®—æ¯ä¸ªç»„ä»¶çš„åç§»
  let verticalOffset = options.offset || 16
  instances.forEach(item => {
    verticalOffset += item.$el.offsetHeight + 16
  })
  options.verticalOffset = verticalOffset

  // åˆ›å»ºå®ä¾‹
  let instance = new MessageConstructor({
    data: options,
    el: document.createElement('div')
  })
  // å®ä¾‹idèµ‹å€¼
  instance.id = id

  instances.push(instance)
  // æ’å…¥dom
  document.body.appendChild(instance.$el)
  return instance
}

Message.close = function (id, userOnClose) {
  let len = instances.length
  let index = -1
  index = instances.findIndex(item => {
    return item.id === id
  })
  if (index === -1) return
  const removedHeight = instances[index].$el.offsetHeight
  if (typeof userOnClose === 'function') {
    userOnClose(instances[index])
  }
  instances.splice(index, 1)
  
  // é‡æ–°è®¡ç®—åç§»é‡
  if (len <= 1 || index > instances.length - 1) return
  for (let i = index; i < len - 1; i++) {
    let dom = instances[i].$el
    dom.style['top'] =
      parseInt(dom.style['top'], 10) - removedHeight - 16 + 'px'
  }
}

Message.cancle = function (id,userOnCancle) {
  let len = instances.length
  let index = -1
  index = instances.findIndex(item => {
    return item.id === id
  })
  if (index === -1) return
  const removedHeight = instances[index].$el.offsetHeight
  if (typeof userOnCancle === 'function') {
    userOnCancle(instances[index])
  }
  instances.splice(index, 1)
  
  // é‡æ–°è®¡ç®—åç§»é‡
  if (len <= 1 || index > instances.length - 1) return
  for (let i = index; i < len - 1; i++) {
    let dom = instances[i].$el
    dom.style['top'] =
      parseInt(dom.style['top'], 10) - removedHeight - 16 + 'px'
  }
}

export default Message
'''
'''--- vue-frontend/vue.config.js ---
const CompressionPlugin = require("compression-webpack-plugin")
module.exports = {
  // é€‰é¡¹...
  publicPath: '',
  productionSourceMap: false,
  configureWebpack: config => {
    if (process.env.NODE_ENV === 'production') {
      return {
        plugins: [
          new CompressionPlugin({
            test: /\.js$|\.html$|.\css/, //åŒ¹é…æ–‡ä»¶å
            threshold: 1024, //å¯¹è¶…è¿‡10kçš„æ•°æ®å‹ç¼©
            deleteOriginalAssets: false //æ˜¯å¦åˆ é™¤æºæ–‡ä»¶
          })
        ]
      }
    }
  },
}
'''